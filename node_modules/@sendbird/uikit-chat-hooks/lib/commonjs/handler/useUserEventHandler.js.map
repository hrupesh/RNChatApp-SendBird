{"version":3,"names":["useUserEventHandler","sdk","handlerId","hookHandler","handlerRef","useRef","useLayoutEffect","current","useEffect","Logger","debug","handler","UserEventHandler","handlerKeys","Object","keys","forEach","key","args","addUserEventHandler","removeUserEventHandler"],"sources":["useUserEventHandler.ts"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef } from 'react';\n\nimport { UserEventHandler } from '@sendbird/chat';\nimport type { SendbirdChatSDK } from '@sendbird/uikit-utils';\nimport { Logger } from '@sendbird/uikit-utils';\n\nexport const useUserEventHandler = (\n  sdk: SendbirdChatSDK,\n  handlerId: string,\n  hookHandler: Partial<UserEventHandler>,\n) => {\n  const handlerRef = useRef(hookHandler);\n  useLayoutEffect(() => {\n    handlerRef.current = hookHandler;\n  });\n\n  useEffect(() => {\n    Logger.debug('[useUserEventHandler] hook called by', handlerId);\n\n    const handler = new UserEventHandler();\n    const handlerKeys = Object.keys(handler) as (keyof typeof handler)[];\n\n    handlerKeys.forEach((key) => {\n      handler[key] = (...args: unknown[]) => {\n        // @ts-ignore\n        handlerRef.current[key]?.(...args);\n      };\n    });\n\n    sdk.addUserEventHandler(handlerId, handler);\n    return () => sdk.removeUserEventHandler(handlerId);\n  }, [sdk, handlerId]);\n};\n"],"mappings":";;;;;;;AAAA;;AAEA;;AAEA;;AAEO,MAAMA,mBAAmB,GAAG,CACjCC,GADiC,EAEjCC,SAFiC,EAGjCC,WAHiC,KAI9B;EACH,MAAMC,UAAU,GAAG,IAAAC,aAAA,EAAOF,WAAP,CAAnB;EACA,IAAAG,sBAAA,EAAgB,MAAM;IACpBF,UAAU,CAACG,OAAX,GAAqBJ,WAArB;EACD,CAFD;EAIA,IAAAK,gBAAA,EAAU,MAAM;IACdC,kBAAA,CAAOC,KAAP,CAAa,sCAAb,EAAqDR,SAArD;;IAEA,MAAMS,OAAO,GAAG,IAAIC,sBAAJ,EAAhB;IACA,MAAMC,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYJ,OAAZ,CAApB;IAEAE,WAAW,CAACG,OAAZ,CAAqBC,GAAD,IAAS;MAC3BN,OAAO,CAACM,GAAD,CAAP,GAAe,YAAwB;QAAA;;QAAA,kCAApBC,IAAoB;UAApBA,IAAoB;QAAA;;QACrC;QACA,gDAAAd,UAAU,CAACG,OAAX,EAAmBU,GAAnB,2GAA0B,GAAGC,IAA7B;MACD,CAHD;IAID,CALD;IAOAjB,GAAG,CAACkB,mBAAJ,CAAwBjB,SAAxB,EAAmCS,OAAnC;IACA,OAAO,MAAMV,GAAG,CAACmB,sBAAJ,CAA2BlB,SAA3B,CAAb;EACD,CAfD,EAeG,CAACD,GAAD,EAAMC,SAAN,CAfH;AAgBD,CA1BM"}