"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useTotalUnreadChannelCount = void 0;

var _react = require("react");

var _uikitUtils = require("@sendbird/uikit-utils");

var _useUserEventHandler = require("../handler/useUserEventHandler");

const HOOK_NAME = 'useTotalUnreadChannelCount';

const useTotalUnreadChannelCount = (sdk, params) => {
  const id = (0, _uikitUtils.useUniqId)(HOOK_NAME);
  const [unreadChannelCount, setUnreadChannelCount] = (0, _react.useState)(0);
  (0, _uikitUtils.useAsyncEffect)(async () => {
    setUnreadChannelCount(await sdk.groupChannel.getTotalUnreadChannelCount());
  }, [sdk]);
  (0, _useUserEventHandler.useUserEventHandler)(sdk, HOOK_NAME + id, {
    onTotalUnreadMessageCountUpdated: async () => {
      setUnreadChannelCount(await sdk.groupChannel.getTotalUnreadChannelCount());
    }
  });
  return (0, _uikitUtils.truncatedCount)(unreadChannelCount, params === null || params === void 0 ? void 0 : params.maxCount);
};

exports.useTotalUnreadChannelCount = useTotalUnreadChannelCount;
//# sourceMappingURL=useTotalUnreadChannelCount.js.map