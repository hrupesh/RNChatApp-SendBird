{"version":3,"names":["useEffect","useLayoutEffect","useRef","GroupChannelHandler","Logger","useChannelHandler","sdk","handlerId","hookHandler","handlerRef","current","debug","handler","handlerKeys","Object","keys","forEach","key","args","groupChannel","addGroupChannelHandler","removeGroupChannelHandler"],"sources":["useChannelHandler.ts"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef } from 'react';\n\nimport { GroupChannelHandler } from '@sendbird/chat/groupChannel';\nimport { Logger, SendbirdChatSDK } from '@sendbird/uikit-utils';\n\nexport const useChannelHandler = (\n  sdk: SendbirdChatSDK,\n  handlerId: string,\n  hookHandler: Partial<GroupChannelHandler>,\n) => {\n  const handlerRef = useRef(hookHandler);\n  useLayoutEffect(() => {\n    handlerRef.current = hookHandler;\n  });\n\n  useEffect(() => {\n    Logger.debug('[useChannelHandler] hook called by', handlerId);\n\n    const handler = new GroupChannelHandler();\n    const handlerKeys = Object.keys(handler) as (keyof typeof handler)[];\n    handlerKeys.forEach((key) => {\n      handler[key] = (...args: unknown[]) => {\n        // @ts-ignore\n        handlerRef.current[key]?.(...args);\n      };\n    });\n\n    sdk.groupChannel.addGroupChannelHandler(handlerId, handler);\n    return () => sdk.groupChannel.removeGroupChannelHandler(handlerId);\n  }, [sdk, handlerId]);\n};\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,eAApB,EAAqCC,MAArC,QAAmD,OAAnD;AAEA,SAASC,mBAAT,QAAoC,6BAApC;AACA,SAASC,MAAT,QAAwC,uBAAxC;AAEA,OAAO,MAAMC,iBAAiB,GAAG,CAC/BC,GAD+B,EAE/BC,SAF+B,EAG/BC,WAH+B,KAI5B;EACH,MAAMC,UAAU,GAAGP,MAAM,CAACM,WAAD,CAAzB;EACAP,eAAe,CAAC,MAAM;IACpBQ,UAAU,CAACC,OAAX,GAAqBF,WAArB;EACD,CAFc,CAAf;EAIAR,SAAS,CAAC,MAAM;IACdI,MAAM,CAACO,KAAP,CAAa,oCAAb,EAAmDJ,SAAnD;IAEA,MAAMK,OAAO,GAAG,IAAIT,mBAAJ,EAAhB;IACA,MAAMU,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYH,OAAZ,CAApB;IACAC,WAAW,CAACG,OAAZ,CAAqBC,GAAD,IAAS;MAC3BL,OAAO,CAACK,GAAD,CAAP,GAAe,YAAwB;QAAA;;QAAA,kCAApBC,IAAoB;UAApBA,IAAoB;QAAA;;QACrC;QACA,gDAAAT,UAAU,CAACC,OAAX,EAAmBO,GAAnB,2GAA0B,GAAGC,IAA7B;MACD,CAHD;IAID,CALD;IAOAZ,GAAG,CAACa,YAAJ,CAAiBC,sBAAjB,CAAwCb,SAAxC,EAAmDK,OAAnD;IACA,OAAO,MAAMN,GAAG,CAACa,YAAJ,CAAiBE,yBAAjB,CAA2Cd,SAA3C,CAAb;EACD,CAdQ,EAcN,CAACD,GAAD,EAAMC,SAAN,CAdM,CAAT;AAeD,CAzBM"}