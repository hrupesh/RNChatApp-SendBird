{"version":3,"names":["React","convertCache","cache","convertSource","source","Array","isArray","uri","headers","convertResizeMode","mode","undefined","FastImage","require","Image_FastImage","resizeMode","onLoad","onError","style","props","e","nativeEvent"],"sources":["Image.fastimage.tsx"],"sourcesContent":["import React from 'react';\nimport type { FastImageProps, ResizeMode, Source } from 'react-native-fast-image';\n\nimport type { SendbirdImageComponent, SendbirdImageProps } from './index';\n\nfunction convertCache(\n  cache?: 'default' | 'reload' | 'force-cache' | 'only-if-cached' | undefined,\n): 'immutable' | 'web' | 'cacheOnly' {\n  switch (cache) {\n    case 'force-cache':\n    case 'only-if-cached':\n      return 'cacheOnly';\n    default:\n      return 'immutable';\n  }\n}\n\nfunction convertSource(source: SendbirdImageProps['source']): Source | number {\n  if (Array.isArray(source)) {\n    return convertSource(source[0]);\n  }\n\n  if (typeof source === 'number') {\n    return source;\n  }\n\n  return {\n    uri: source.uri,\n    headers: source.headers,\n    cache: convertCache(source.cache), //'immutable' | 'web' | 'cacheOnly'\n  };\n}\n\nfunction convertResizeMode(mode?: SendbirdImageProps['resizeMode']): ResizeMode | undefined {\n  switch (mode) {\n    case 'center':\n      return 'center';\n    case 'contain':\n      return 'contain';\n    case 'cover':\n      return 'cover';\n    case 'stretch':\n      return 'stretch';\n    default:\n      return undefined;\n  }\n}\n\nlet FastImage: (props: FastImageProps) => JSX.Element | null = () => null;\n\ntry {\n  FastImage = require('react-native-fast-image') as (props: FastImageProps) => JSX.Element;\n} catch {}\n\nconst Image_FastImage: SendbirdImageComponent = ({ source, resizeMode, onLoad, onError, style, ...props }) => {\n  return (\n    <FastImage\n      {...props}\n      onLoad={onLoad && ((e) => onLoad(e.nativeEvent))}\n      onError={onError && (() => onError({}))}\n      style={style as FastImageProps['style']}\n      source={convertSource(source)}\n      resizeMode={convertResizeMode(resizeMode)}\n    />\n  );\n};\n\nexport default Image_FastImage;\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAKA,SAASC,YAAT,CACEC,KADF,EAEqC;EACnC,QAAQA,KAAR;IACE,KAAK,aAAL;IACA,KAAK,gBAAL;MACE,OAAO,WAAP;;IACF;MACE,OAAO,WAAP;EALJ;AAOD;;AAED,SAASC,aAAT,CAAuBC,MAAvB,EAA8E;EAC5E,IAAIC,KAAK,CAACC,OAAN,CAAcF,MAAd,CAAJ,EAA2B;IACzB,OAAOD,aAAa,CAACC,MAAM,CAAC,CAAD,CAAP,CAApB;EACD;;EAED,IAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;IAC9B,OAAOA,MAAP;EACD;;EAED,OAAO;IACLG,GAAG,EAAEH,MAAM,CAACG,GADP;IAELC,OAAO,EAAEJ,MAAM,CAACI,OAFX;IAGLN,KAAK,EAAED,YAAY,CAACG,MAAM,CAACF,KAAR,CAHd,CAG8B;;EAH9B,CAAP;AAKD;;AAED,SAASO,iBAAT,CAA2BC,IAA3B,EAA4F;EAC1F,QAAQA,IAAR;IACE,KAAK,QAAL;MACE,OAAO,QAAP;;IACF,KAAK,SAAL;MACE,OAAO,SAAP;;IACF,KAAK,OAAL;MACE,OAAO,OAAP;;IACF,KAAK,SAAL;MACE,OAAO,SAAP;;IACF;MACE,OAAOC,SAAP;EAVJ;AAYD;;AAED,IAAIC,SAAwD,GAAG,MAAM,IAArE;;AAEA,IAAI;EACFA,SAAS,GAAGC,OAAO,CAAC,yBAAD,CAAnB;AACD,CAFD,CAEE,MAAM,CAAE;;AAEV,MAAMC,eAAuC,GAAG,QAA8D;EAAA,IAA7D;IAAEV,MAAF;IAAUW,UAAV;IAAsBC,MAAtB;IAA8BC,OAA9B;IAAuCC,KAAvC;IAA8C,GAAGC;EAAjD,CAA6D;EAC5G,oBACE,oBAAC,SAAD,eACMA,KADN;IAEE,MAAM,EAAEH,MAAM,KAAMI,CAAD,IAAOJ,MAAM,CAACI,CAAC,CAACC,WAAH,CAAlB,CAFhB;IAGE,OAAO,EAAEJ,OAAO,KAAK,MAAMA,OAAO,CAAC,EAAD,CAAlB,CAHlB;IAIE,KAAK,EAAEC,KAJT;IAKE,MAAM,EAAEf,aAAa,CAACC,MAAD,CALvB;IAME,UAAU,EAAEK,iBAAiB,CAACM,UAAD;EAN/B,GADF;AAUD,CAXD;;AAaA,eAAeD,eAAf"}