{"version":3,"names":["React","View","MAX","AvatarGroup","children","containerStyle","size","childAmount","Children","count","overflow","width","height","borderRadius","backgroundColor","renderAvatars","map","child","index","isValidElement","cloneElement","top","getTopPoint","left","getLeftPoint","getWidthPoint","getHeightPoint","innerLeft","getInnerLeft","innerTop","getInnerTop","position","square","slice","_","total","idx"],"sources":["AvatarGroup.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport { StyleProp, View, ViewStyle } from 'react-native';\n\nconst MAX = 4;\n\ntype Props = React.PropsWithChildren<{\n  size?: number;\n  containerStyle?: StyleProp<ViewStyle>;\n}>;\nconst AvatarGroup = ({ children, containerStyle, size = 56 }: Props) => {\n  const childAmount = React.Children.count(children);\n\n  if (childAmount === 0) {\n    return (\n      <View\n        style={[\n          containerStyle,\n          {\n            overflow: 'hidden',\n            width: size,\n            height: size,\n            borderRadius: size,\n            backgroundColor: 'rgba(120,120,120,0.2)',\n          },\n        ]}\n      />\n    );\n  }\n\n  const renderAvatars = () => {\n    return (\n      React.Children.map(children, (child, index) => {\n        if (index + 1 > MAX) return child;\n        if (!React.isValidElement(child)) return child;\n\n        if (childAmount === 1) return React.cloneElement(child as ReactElement, { size, containerStyle });\n\n        const top = getTopPoint(index, childAmount) * size;\n        const left = getLeftPoint(index) * size;\n        const width = getWidthPoint(index, childAmount) * size;\n        const height = getHeightPoint(index, childAmount) * size;\n        const innerLeft = -getInnerLeft(index, childAmount) * size;\n        const innerTop = -getInnerTop(childAmount) * size;\n\n        return (\n          <View style={{ overflow: 'hidden', position: 'absolute', top, left, width, height }}>\n            {React.cloneElement(child as ReactElement, {\n              size,\n              square: true,\n              containerStyle: { left: innerLeft, top: innerTop },\n            })}\n          </View>\n        );\n      })?.slice(0, 4) ?? []\n    );\n  };\n\n  return (\n    <View style={[containerStyle, { overflow: 'hidden', width: size, height: size, borderRadius: size }]}>\n      {renderAvatars()}\n    </View>\n  );\n};\n\nconst getHeightPoint = (_: number, total: number) => {\n  if (total === 2) return 1;\n  return 0.5;\n};\nconst getWidthPoint = (idx: number, total: number) => {\n  if (total === 3 && idx === 0) return 1;\n  return 0.5;\n};\nconst getTopPoint = (idx: number, total: number) => {\n  if (total === 2) return -0.025;\n  if (total === 3 && idx === 0) return -0.025;\n  if (total === 3 && idx !== 0) return 0.525;\n  if (idx === 0 || idx === 1) return -0.025;\n  return 0.525;\n};\nconst getLeftPoint = (idx: number) => {\n  if (idx === 0 || idx === 2) return -0.025;\n  return 0.525;\n};\nconst getInnerLeft = (idx: number, total: number) => {\n  if (total === 3 && idx === 0) return 0;\n  return 0.25;\n};\nconst getInnerTop = (total: number) => {\n  if (total === 2) return 0;\n  return 0.25;\n};\n\nexport default AvatarGroup;\n"],"mappings":"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"}