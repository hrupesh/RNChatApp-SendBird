{"version":3,"names":["React","useState","TouchableOpacity","View","Logger","Modal","Text","createStyleSheet","useHeaderStyle","useUIKitTheme","DialogBox","LoadingSpinner","ActionMenu","visible","onHide","onError","onDismiss","title","menuItems","statusBarTranslucent","colors","pending","setPending","_onHide","alignItems","justifyContent","styles","ui","dialog","default","none","text","maxWidth","highlight","width","marginLeft","buttonContainer","map","item","index","button","onPress","e","errorHandler","error","style","destructive","flexDirection","paddingHorizontal","paddingVertical","marginTop","marginBottom"],"sources":["index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { TouchableOpacity, View } from 'react-native';\n\nimport { Logger } from '@sendbird/uikit-utils';\n\nimport Modal from '../../components/Modal';\nimport Text from '../../components/Text';\nimport createStyleSheet from '../../styles/createStyleSheet';\nimport useHeaderStyle from '../../styles/useHeaderStyle';\nimport useUIKitTheme from '../../theme/useUIKitTheme';\nimport DialogBox from '../Dialog/DialogBox';\nimport LoadingSpinner from '../LoadingSpinner';\n\nexport type ActionMenuItem = {\n  title?: string;\n  menuItems: {\n    title: string;\n    style?: 'destructive';\n    onPress?: (() => Promise<void>) | (() => void);\n    onError?: () => void;\n  }[];\n};\n\ntype Props = {\n  visible: boolean;\n  onHide: () => void;\n  onError?: (error: unknown) => void;\n  onDismiss?: () => void;\n} & ActionMenuItem;\nconst ActionMenu = ({ visible, onHide, onError, onDismiss, title, menuItems }: Props) => {\n  const { statusBarTranslucent } = useHeaderStyle();\n  const { colors } = useUIKitTheme();\n  const [pending, setPending] = useState(false);\n  const _onHide = () => {\n    if (!pending) onHide();\n  };\n\n  return (\n    <Modal\n      onClose={_onHide}\n      onDismiss={onDismiss}\n      statusBarTranslucent={statusBarTranslucent}\n      visible={visible}\n      backgroundStyle={{ alignItems: 'center', justifyContent: 'center' }}\n    >\n      <DialogBox>\n        <View style={styles.title}>\n          <Text\n            h1\n            color={colors.ui.dialog.default.none.text}\n            numberOfLines={1}\n            // style={{ flex: 1 }}\n            style={{ maxWidth: pending ? '86%' : '100%' }}\n          >\n            {title}\n          </Text>\n          {pending && (\n            <LoadingSpinner\n              size={20}\n              color={colors.ui.dialog.default.none.highlight}\n              style={{ width: '10%', marginLeft: '4%' }}\n            />\n          )}\n        </View>\n        <View style={styles.buttonContainer}>\n          {menuItems.map((item, index) => {\n            return (\n              <TouchableOpacity\n                activeOpacity={0.75}\n                key={item.title + index}\n                style={styles.button}\n                disabled={pending}\n                onPress={async () => {\n                  setPending(true);\n                  try {\n                    await item.onPress?.();\n                  } catch (e: unknown) {\n                    const errorHandler = onError ?? item.onError;\n                    errorHandler?.(e);\n                    if (!errorHandler) Logger.error('ActionMenu onPress error', e);\n                  } finally {\n                    onHide();\n                    setPending(false);\n                  }\n                }}\n              >\n                <Text\n                  subtitle2\n                  color={\n                    item.style === 'destructive'\n                      ? colors.ui.dialog.default.none.destructive\n                      : colors.ui.dialog.default.none.text\n                  }\n                  numberOfLines={1}\n                >\n                  {item.title}\n                </Text>\n              </TouchableOpacity>\n            );\n          })}\n        </View>\n      </DialogBox>\n    </Modal>\n  );\n};\n\nconst styles = createStyleSheet({\n  title: {\n    flexDirection: 'row',\n    paddingHorizontal: 24,\n    paddingVertical: 20,\n    alignItems: 'center',\n  },\n  buttonContainer: {\n    marginTop: 4,\n    marginBottom: 8,\n  },\n  button: {\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n  },\n});\n\nexport default ActionMenu;\n"],"mappings":"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"}