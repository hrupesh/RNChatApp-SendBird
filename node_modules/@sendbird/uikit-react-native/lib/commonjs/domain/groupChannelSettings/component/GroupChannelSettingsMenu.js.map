{"version":3,"names":["WARN_onPressMenuNotification","GroupChannelSettingsMenu","onPressMenuModeration","onPressMenuMembers","onPressMenuLeaveChannel","onPressMenuNotification","menuItemsCreator","menu","sdk","features","useSendbirdChat","channel","useContext","GroupChannelSettingsContexts","Fragment","STRINGS","useLocalization","colors","useUIKitTheme","__DEV__","Logger","warn","toggleNotification","myPushTriggerOption","setMyPushTriggerOption","PushTriggerOption","DEFAULT","OFF","onPressNotificationMenu","actionLabelNotificationMenu","actionItemNotificationMenu","useIIFE","getNotificationsLabel","ALL","GROUP_CHANNEL_SETTINGS","MENU_NOTIFICATION_LABEL_ON","MENU_NOTIFICATION_LABEL_OFF","MENTION_ONLY","MENU_NOTIFICATION_LABEL_MENTION_ONLY","conditionChaining","userMentionEnabled","onBackground01","menuItems","icon","visible","myRole","name","MENU_MODERATION","onPress","actionItem","MENU_NOTIFICATION","actionLabel","MENU_MEMBERS","String","memberCount","iconColor","error","MENU_LEAVE_CHANNEL","leave","then","clearCachedMessages","url","catch","map","disabled","iconBackgroundColor"],"sources":["GroupChannelSettingsMenu.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { View } from 'react-native';\n\nimport { PushTriggerOption } from '@sendbird/chat';\nimport type { MenuBarProps } from '@sendbird/uikit-react-native-foundation';\nimport { Icon, MenuBar, Switch, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { Logger, conditionChaining, useIIFE } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport { GroupChannelSettingsContexts } from '../module/moduleContext';\nimport type { GroupChannelSettingsProps } from '../types';\n\nlet WARN_onPressMenuNotification = false;\n\nconst GroupChannelSettingsMenu = ({\n  onPressMenuModeration,\n  onPressMenuMembers,\n  onPressMenuLeaveChannel,\n  onPressMenuNotification,\n  menuItemsCreator = (menu) => menu,\n}: GroupChannelSettingsProps['Menu']) => {\n  const { sdk, features } = useSendbirdChat();\n  const { channel } = useContext(GroupChannelSettingsContexts.Fragment);\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n\n  if (__DEV__ && !WARN_onPressMenuNotification && !onPressMenuNotification) {\n    Logger.warn('You should pass `onPressMenuNotification` prop if using mention');\n    WARN_onPressMenuNotification = true;\n  }\n\n  const toggleNotification = async () => {\n    if (channel.myPushTriggerOption === 'off') {\n      await channel.setMyPushTriggerOption(PushTriggerOption.DEFAULT);\n    } else {\n      await channel.setMyPushTriggerOption(PushTriggerOption.OFF);\n    }\n  };\n\n  const { onPressNotificationMenu, actionLabelNotificationMenu, actionItemNotificationMenu } = useIIFE(() => {\n    const getNotificationsLabel = () => {\n      switch (channel.myPushTriggerOption) {\n        case PushTriggerOption.ALL:\n        case PushTriggerOption.DEFAULT:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_ON;\n        case PushTriggerOption.OFF:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_OFF;\n        case PushTriggerOption.MENTION_ONLY:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_MENTION_ONLY;\n      }\n    };\n\n    return {\n      actionLabelNotificationMenu: getNotificationsLabel(),\n      actionItemNotificationMenu: conditionChaining(\n        [features.userMentionEnabled],\n        [\n          <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n          <Switch value={channel.myPushTriggerOption !== 'off'} onChangeValue={toggleNotification} />,\n        ],\n      ),\n      onPressNotificationMenu: () => {\n        if (features.userMentionEnabled) onPressMenuNotification?.();\n        else toggleNotification();\n      },\n    };\n  });\n\n  const menuItems: MenuBarProps[] = menuItemsCreator([\n    {\n      icon: 'moderation',\n      visible: channel.myRole === 'operator',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_MODERATION,\n      onPress: () => onPressMenuModeration(),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'notifications',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION,\n      onPress: onPressNotificationMenu,\n      actionLabel: actionLabelNotificationMenu,\n      actionItem: actionItemNotificationMenu,\n    },\n    {\n      icon: 'members',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_MEMBERS,\n      onPress: () => onPressMenuMembers(),\n      actionLabel: String(channel.memberCount),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'leave',\n      iconColor: colors.error,\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_LEAVE_CHANNEL,\n      onPress: () => {\n        channel.leave().then(() => {\n          onPressMenuLeaveChannel();\n          sdk.clearCachedMessages([channel.url]).catch();\n        });\n      },\n    },\n  ]);\n\n  return (\n    <View>\n      {menuItems.map((menu) => {\n        return (\n          <MenuBar\n            key={menu.name}\n            onPress={menu.onPress}\n            name={menu.name}\n            disabled={menu.disabled}\n            visible={menu.visible}\n            icon={menu.icon}\n            iconColor={menu.iconColor}\n            iconBackgroundColor={menu.iconBackgroundColor}\n            actionLabel={menu.actionLabel}\n            actionItem={menu.actionItem}\n          />\n        );\n      })}\n    </View>\n  );\n};\n\nexport default GroupChannelSettingsMenu;\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AAEA;;AACA;;AAEA;;AACA;;;;;;AAGA,IAAIA,4BAA4B,GAAG,KAAnC;;AAEA,MAAMC,wBAAwB,GAAG,QAMQ;EAAA,IANP;IAChCC,qBADgC;IAEhCC,kBAFgC;IAGhCC,uBAHgC;IAIhCC,uBAJgC;IAKhCC,gBAAgB,GAAIC,IAAD,IAAUA;EALG,CAMO;EACvC,MAAM;IAAEC,GAAF;IAAOC;EAAP,IAAoB,IAAAC,2BAAA,GAA1B;EACA,MAAM;IAAEC;EAAF,IAAc,IAAAC,iBAAA,EAAWC,2CAAA,CAA6BC,QAAxC,CAApB;EACA,MAAM;IAAEC;EAAF,IAAc,IAAAC,2BAAA,GAApB;EACA,MAAM;IAAEC;EAAF,IAAa,IAAAC,yCAAA,GAAnB;;EAEA,IAAIC,OAAO,IAAI,CAACnB,4BAAZ,IAA4C,CAACK,uBAAjD,EAA0E;IACxEe,kBAAA,CAAOC,IAAP,CAAY,iEAAZ;;IACArB,4BAA4B,GAAG,IAA/B;EACD;;EAED,MAAMsB,kBAAkB,GAAG,YAAY;IACrC,IAAIX,OAAO,CAACY,mBAAR,KAAgC,KAApC,EAA2C;MACzC,MAAMZ,OAAO,CAACa,sBAAR,CAA+BC,uBAAA,CAAkBC,OAAjD,CAAN;IACD,CAFD,MAEO;MACL,MAAMf,OAAO,CAACa,sBAAR,CAA+BC,uBAAA,CAAkBE,GAAjD,CAAN;IACD;EACF,CAND;;EAQA,MAAM;IAAEC,uBAAF;IAA2BC,2BAA3B;IAAwDC;EAAxD,IAAuF,IAAAC,mBAAA,EAAQ,MAAM;IACzG,MAAMC,qBAAqB,GAAG,MAAM;MAClC,QAAQrB,OAAO,CAACY,mBAAhB;QACE,KAAKE,uBAAA,CAAkBQ,GAAvB;QACA,KAAKR,uBAAA,CAAkBC,OAAvB;UACE,OAAOX,OAAO,CAACmB,sBAAR,CAA+BC,0BAAtC;;QACF,KAAKV,uBAAA,CAAkBE,GAAvB;UACE,OAAOZ,OAAO,CAACmB,sBAAR,CAA+BE,2BAAtC;;QACF,KAAKX,uBAAA,CAAkBY,YAAvB;UACE,OAAOtB,OAAO,CAACmB,sBAAR,CAA+BI,oCAAtC;MAPJ;IASD,CAVD;;IAYA,OAAO;MACLT,2BAA2B,EAAEG,qBAAqB,EAD7C;MAELF,0BAA0B,EAAE,IAAAS,6BAAA,EAC1B,CAAC9B,QAAQ,CAAC+B,kBAAV,CAD0B,EAE1B,cACE,6BAAC,gCAAD;QAAM,IAAI,EAAE,eAAZ;QAA6B,KAAK,EAAEvB,MAAM,CAACwB;MAA3C,EADF,eAEE,6BAAC,kCAAD;QAAQ,KAAK,EAAE9B,OAAO,CAACY,mBAAR,KAAgC,KAA/C;QAAsD,aAAa,EAAED;MAArE,EAFF,CAF0B,CAFvB;MASLM,uBAAuB,EAAE,MAAM;QAC7B,IAAInB,QAAQ,CAAC+B,kBAAb,EAAiCnC,uBAAuB,SAAvB,IAAAA,uBAAuB,WAAvB,YAAAA,uBAAuB,GAAxD,KACKiB,kBAAkB;MACxB;IAZI,CAAP;EAcD,CA3B4F,CAA7F;EA6BA,MAAMoB,SAAyB,GAAGpC,gBAAgB,CAAC,CACjD;IACEqC,IAAI,EAAE,YADR;IAEEC,OAAO,EAAEjC,OAAO,CAACkC,MAAR,KAAmB,UAF9B;IAGEC,IAAI,EAAE/B,OAAO,CAACmB,sBAAR,CAA+Ba,eAHvC;IAIEC,OAAO,EAAE,MAAM9C,qBAAqB,EAJtC;IAKE+C,UAAU,eAAE,6BAAC,gCAAD;MAAM,IAAI,EAAE,eAAZ;MAA6B,KAAK,EAAEhC,MAAM,CAACwB;IAA3C;EALd,CADiD,EAQjD;IACEE,IAAI,EAAE,eADR;IAEEG,IAAI,EAAE/B,OAAO,CAACmB,sBAAR,CAA+BgB,iBAFvC;IAGEF,OAAO,EAAEpB,uBAHX;IAIEuB,WAAW,EAAEtB,2BAJf;IAKEoB,UAAU,EAAEnB;EALd,CARiD,EAejD;IACEa,IAAI,EAAE,SADR;IAEEG,IAAI,EAAE/B,OAAO,CAACmB,sBAAR,CAA+BkB,YAFvC;IAGEJ,OAAO,EAAE,MAAM7C,kBAAkB,EAHnC;IAIEgD,WAAW,EAAEE,MAAM,CAAC1C,OAAO,CAAC2C,WAAT,CAJrB;IAKEL,UAAU,eAAE,6BAAC,gCAAD;MAAM,IAAI,EAAE,eAAZ;MAA6B,KAAK,EAAEhC,MAAM,CAACwB;IAA3C;EALd,CAfiD,EAsBjD;IACEE,IAAI,EAAE,OADR;IAEEY,SAAS,EAAEtC,MAAM,CAACuC,KAFpB;IAGEV,IAAI,EAAE/B,OAAO,CAACmB,sBAAR,CAA+BuB,kBAHvC;IAIET,OAAO,EAAE,MAAM;MACbrC,OAAO,CAAC+C,KAAR,GAAgBC,IAAhB,CAAqB,MAAM;QACzBvD,uBAAuB;QACvBI,GAAG,CAACoD,mBAAJ,CAAwB,CAACjD,OAAO,CAACkD,GAAT,CAAxB,EAAuCC,KAAvC;MACD,CAHD;IAID;EATH,CAtBiD,CAAD,CAAlD;EAmCA,oBACE,6BAAC,iBAAD,QACGpB,SAAS,CAACqB,GAAV,CAAexD,IAAD,IAAU;IACvB,oBACE,6BAAC,mCAAD;MACE,GAAG,EAAEA,IAAI,CAACuC,IADZ;MAEE,OAAO,EAAEvC,IAAI,CAACyC,OAFhB;MAGE,IAAI,EAAEzC,IAAI,CAACuC,IAHb;MAIE,QAAQ,EAAEvC,IAAI,CAACyD,QAJjB;MAKE,OAAO,EAAEzD,IAAI,CAACqC,OALhB;MAME,IAAI,EAAErC,IAAI,CAACoC,IANb;MAOE,SAAS,EAAEpC,IAAI,CAACgD,SAPlB;MAQE,mBAAmB,EAAEhD,IAAI,CAAC0D,mBAR5B;MASE,WAAW,EAAE1D,IAAI,CAAC4C,WATpB;MAUE,UAAU,EAAE5C,IAAI,CAAC0C;IAVnB,EADF;EAcD,CAfA,CADH,CADF;AAoBD,CA7GD;;eA+GehD,wB"}