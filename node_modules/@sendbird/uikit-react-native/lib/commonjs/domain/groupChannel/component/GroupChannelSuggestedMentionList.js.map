{"version":3,"names":["GroupChannelSuggestedMentionList","text","selection","inputHeight","bottomInset","onPressToMention","mentionedUsers","width","screenWidth","height","screenHeight","useWindowDimensions","channel","useContext","GroupChannelContexts","Fragment","mentionManager","useSendbirdChat","STRINGS","useLocalization","colors","useUIKitTheme","topInset","useHeaderStyle","left","right","useSafeAreaInsets","keyboard","useKeyboardStatus","members","reset","searchStringRange","searchLimited","useMentionSuggestion","isLandscape","isShortened","visible","canRenderMembers","length","maxHeight","styles","suggestion","renderLimitGuide","borderTopColor","onBackground04","marginRight","onBackground02","GROUP_CHANNEL","MENTION_LIMITED","config","mentionLimit","renderMembers","map","member","userId","userContainer","profileUrl","userAvatar","userInfo","onBackground01","userNickname","nickname","LABELS","USER_NO_NAME","onBackground03","position","bottom","container","scrollView","backgroundColor","background","bottomSpace","borderTopWidth","paddingLeft","paddingRight","conditionChaining","createStyleSheet","top","flexDirection","alignItems","justifyContent","flex","flexShrink","lineHeight","textAlignVertical","minWidth","paddingHorizontal"],"sources":["GroupChannelSuggestedMentionList.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { Pressable, ScrollView, View, useWindowDimensions } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport {\n  Avatar,\n  Divider,\n  Icon,\n  Text,\n  createStyleSheet,\n  useHeaderStyle,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport { conditionChaining } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport useKeyboardStatus from '../../../hooks/useKeyboardStatus';\nimport useMentionSuggestion from '../../../hooks/useMentionSuggestion';\nimport { GroupChannelContexts } from '../module/moduleContext';\nimport type { GroupChannelProps } from '../types';\n\nconst GroupChannelSuggestedMentionList = ({\n  text,\n  selection,\n  inputHeight,\n  bottomInset,\n  onPressToMention,\n  mentionedUsers,\n}: GroupChannelProps['SuggestedMentionList']) => {\n  const { width: screenWidth, height: screenHeight } = useWindowDimensions();\n  const { channel } = useContext(GroupChannelContexts.Fragment);\n  const { mentionManager } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n  const { topInset } = useHeaderStyle();\n  const { left, right } = useSafeAreaInsets();\n\n  const keyboard = useKeyboardStatus();\n\n  const { members, reset, searchStringRange, searchLimited } = useMentionSuggestion({\n    text,\n    selection,\n    channel,\n    mentionedUsers,\n  });\n\n  const isLandscape = screenWidth > screenHeight;\n  const isShortened = isLandscape && keyboard.visible;\n  const canRenderMembers = members.length > 0;\n  const maxHeight = isShortened ? screenHeight - (topInset + inputHeight + keyboard.height) : styles.suggestion.height;\n\n  const renderLimitGuide = () => {\n    return (\n      <View style={[styles.searchLimited, { borderTopColor: colors.onBackground04 }]}>\n        <Icon icon={'info'} size={20} containerStyle={{ marginRight: 4 }} color={colors.onBackground02} />\n        <Text body3 color={colors.onBackground02}>\n          {STRINGS.GROUP_CHANNEL.MENTION_LIMITED(mentionManager.config.mentionLimit)}\n        </Text>\n      </View>\n    );\n  };\n\n  const renderMembers = () => {\n    return (\n      <View>\n        {members.map((member) => {\n          return (\n            <Pressable\n              onPress={() => {\n                onPressToMention(member, searchStringRange);\n                reset();\n              }}\n              key={member.userId}\n              style={styles.userContainer}\n            >\n              <Avatar size={28} uri={member.profileUrl} containerStyle={styles.userAvatar} />\n              <View style={styles.userInfo}>\n                <Text body2 color={colors.onBackground01} numberOfLines={1} style={styles.userNickname}>\n                  {member.nickname || STRINGS.LABELS.USER_NO_NAME}\n                </Text>\n                <Text body3 color={colors.onBackground03} numberOfLines={1} style={styles.userId}>\n                  {member.userId}\n                </Text>\n                <Divider style={{ position: 'absolute', bottom: 0 }} />\n              </View>\n            </Pressable>\n          );\n        })}\n      </View>\n    );\n  };\n\n  return (\n    <Pressable\n      onPress={reset}\n      pointerEvents={canRenderMembers ? 'auto' : 'none'}\n      style={[styles.container, { bottom: inputHeight + bottomInset }]}\n    >\n      <ScrollView\n        bounces={false}\n        keyboardDismissMode={'none'}\n        keyboardShouldPersistTaps={'always'}\n        style={[\n          styles.scrollView,\n          {\n            maxHeight,\n            backgroundColor: colors.background,\n            bottom: keyboard.bottomSpace,\n          },\n          canRenderMembers && {\n            borderTopWidth: 1,\n            borderTopColor: colors.onBackground04,\n          },\n        ]}\n        contentContainerStyle={{ paddingLeft: left, paddingRight: right }}\n      >\n        {conditionChaining([searchLimited, canRenderMembers], [renderLimitGuide(), renderMembers(), null])}\n      </ScrollView>\n    </Pressable>\n  );\n};\n\nconst styles = createStyleSheet({\n  suggestion: {\n    height: 196,\n  },\n  container: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    left: 0,\n  },\n  scrollView: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n  },\n  userContainer: {\n    paddingLeft: 16,\n    flexDirection: 'row',\n    height: 44,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  userAvatar: {\n    marginRight: 16,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    flex: 1,\n  },\n  userNickname: {\n    flexShrink: 1,\n    lineHeight: 44,\n    textAlignVertical: 'center',\n    marginRight: 6,\n  },\n  userId: {\n    lineHeight: 44,\n    textAlignVertical: 'center',\n    minWidth: 32,\n    flexShrink: 1,\n    marginRight: 16,\n  },\n  searchLimited: {\n    borderTopWidth: 1,\n    paddingHorizontal: 16,\n    height: 44,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n});\nexport default GroupChannelSuggestedMentionList;\n"],"mappings":"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"}