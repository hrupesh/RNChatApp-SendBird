{"version":3,"names":["isLayoutAnimationConfigured","configureNextLayoutAnimation","event","config","LayoutAnimation","create","duration","easing","Properties","scaleY","onEnd","configureNext","showEvent","hideEvent","Platform","select","android","default","useKeyboardStatus","keyboardStatus","setKeyboardStatus","useState","visible","height","bottomSpace","bottom","bottomInset","useSafeAreaInsets","useEffect","subscriptions","Keyboard","addListener","endCoordinates","ios","nextLayoutAnimation","NOOP","forEach","it","remove"],"sources":["useKeyboardStatus.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Keyboard, KeyboardEvent, KeyboardEventName, LayoutAnimation, Platform } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { NOOP } from '@sendbird/uikit-utils';\n\ntype KeyboardEvents = {\n  showEvent: KeyboardEventName;\n  hideEvent: KeyboardEventName;\n};\n\nlet isLayoutAnimationConfigured = false;\n\nconst configureNextLayoutAnimation = (event: KeyboardEvent) => {\n  if (isLayoutAnimationConfigured) return;\n  const config = LayoutAnimation.create(event.duration, event.easing, LayoutAnimation.Properties.scaleY);\n  isLayoutAnimationConfigured = true;\n  const onEnd = () => (isLayoutAnimationConfigured = false);\n  LayoutAnimation.configureNext(config, onEnd, onEnd);\n};\n\nconst { showEvent, hideEvent } = Platform.select<KeyboardEvents>({\n  android: { showEvent: 'keyboardDidShow', hideEvent: 'keyboardDidHide' },\n  default: { showEvent: 'keyboardWillShow', hideEvent: 'keyboardWillHide' },\n});\n\nconst useKeyboardStatus = () => {\n  const [keyboardStatus, setKeyboardStatus] = useState({ visible: false, height: 0, bottomSpace: 0 });\n  const { bottom: bottomInset } = useSafeAreaInsets();\n\n  useEffect(() => {\n    const subscriptions = [\n      Keyboard.addListener(showEvent, (event) => {\n        const height = event.endCoordinates.height;\n        const bottomSpace = Platform.select({ ios: height - bottomInset, default: 0 });\n        const nextLayoutAnimation = Platform.select({ ios: configureNextLayoutAnimation, default: NOOP });\n\n        nextLayoutAnimation(event);\n        setKeyboardStatus({ visible: true, height, bottomSpace });\n      }),\n\n      Keyboard.addListener(hideEvent, () => {\n        const height = 0;\n        const bottomSpace = Platform.select({ default: height });\n        // const nextLayoutAnimation = Platform.select({ ios: configureNextLayoutAnimation, default: NOOP });\n\n        // nextLayoutAnimation(event);\n        setKeyboardStatus({ visible: false, height, bottomSpace });\n      }),\n    ];\n    return () => {\n      subscriptions.forEach((it) => it.remove());\n    };\n  }, []);\n\n  return keyboardStatus;\n};\n\nexport default useKeyboardStatus;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAOA,IAAIA,2BAA2B,GAAG,KAAlC;;AAEA,MAAMC,4BAA4B,GAAIC,KAAD,IAA0B;EAC7D,IAAIF,2BAAJ,EAAiC;;EACjC,MAAMG,MAAM,GAAGC,4BAAA,CAAgBC,MAAhB,CAAuBH,KAAK,CAACI,QAA7B,EAAuCJ,KAAK,CAACK,MAA7C,EAAqDH,4BAAA,CAAgBI,UAAhB,CAA2BC,MAAhF,CAAf;;EACAT,2BAA2B,GAAG,IAA9B;;EACA,MAAMU,KAAK,GAAG,MAAOV,2BAA2B,GAAG,KAAnD;;EACAI,4BAAA,CAAgBO,aAAhB,CAA8BR,MAA9B,EAAsCO,KAAtC,EAA6CA,KAA7C;AACD,CAND;;AAQA,MAAM;EAAEE,SAAF;EAAaC;AAAb,IAA2BC,qBAAA,CAASC,MAAT,CAAgC;EAC/DC,OAAO,EAAE;IAAEJ,SAAS,EAAE,iBAAb;IAAgCC,SAAS,EAAE;EAA3C,CADsD;EAE/DI,OAAO,EAAE;IAAEL,SAAS,EAAE,kBAAb;IAAiCC,SAAS,EAAE;EAA5C;AAFsD,CAAhC,CAAjC;;AAKA,MAAMK,iBAAiB,GAAG,MAAM;EAC9B,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsC,IAAAC,eAAA,EAAS;IAAEC,OAAO,EAAE,KAAX;IAAkBC,MAAM,EAAE,CAA1B;IAA6BC,WAAW,EAAE;EAA1C,CAAT,CAA5C;EACA,MAAM;IAAEC,MAAM,EAAEC;EAAV,IAA0B,IAAAC,6CAAA,GAAhC;EAEA,IAAAC,gBAAA,EAAU,MAAM;IACd,MAAMC,aAAa,GAAG,CACpBC,qBAAA,CAASC,WAAT,CAAqBnB,SAArB,EAAiCV,KAAD,IAAW;MACzC,MAAMqB,MAAM,GAAGrB,KAAK,CAAC8B,cAAN,CAAqBT,MAApC;;MACA,MAAMC,WAAW,GAAGV,qBAAA,CAASC,MAAT,CAAgB;QAAEkB,GAAG,EAAEV,MAAM,GAAGG,WAAhB;QAA6BT,OAAO,EAAE;MAAtC,CAAhB,CAApB;;MACA,MAAMiB,mBAAmB,GAAGpB,qBAAA,CAASC,MAAT,CAAgB;QAAEkB,GAAG,EAAEhC,4BAAP;QAAqCgB,OAAO,EAAEkB;MAA9C,CAAhB,CAA5B;;MAEAD,mBAAmB,CAAChC,KAAD,CAAnB;MACAkB,iBAAiB,CAAC;QAAEE,OAAO,EAAE,IAAX;QAAiBC,MAAjB;QAAyBC;MAAzB,CAAD,CAAjB;IACD,CAPD,CADoB,EAUpBM,qBAAA,CAASC,WAAT,CAAqBlB,SAArB,EAAgC,MAAM;MACpC,MAAMU,MAAM,GAAG,CAAf;;MACA,MAAMC,WAAW,GAAGV,qBAAA,CAASC,MAAT,CAAgB;QAAEE,OAAO,EAAEM;MAAX,CAAhB,CAApB,CAFoC,CAGpC;MAEA;;;MACAH,iBAAiB,CAAC;QAAEE,OAAO,EAAE,KAAX;QAAkBC,MAAlB;QAA0BC;MAA1B,CAAD,CAAjB;IACD,CAPD,CAVoB,CAAtB;IAmBA,OAAO,MAAM;MACXK,aAAa,CAACO,OAAd,CAAuBC,EAAD,IAAQA,EAAE,CAACC,MAAH,EAA9B;IACD,CAFD;EAGD,CAvBD,EAuBG,EAvBH;EAyBA,OAAOnB,cAAP;AACD,CA9BD;;eAgCeD,iB"}