{"version":3,"names":["MentionManager","constructor","config","mentionEnabled","inRangeUnderOver","start","num","end","inRangeUnderMore","inRangeLessOver","inRangeLessMore","overlaps","a","b","compare","inRange","underOver","underMore","lessOver","lessMore","text","selectionIndex","lastSpan","slice","split","delimiter","pop","triggerIdx","indexOf","trigger","mentionSpan","searchString","length","isTriggered","startsWith","isValidSearchString","_invalidStartsKeywords","every","it","offset","mentionedUsers","map","range","selection","lastSelection","removedOffset","filtered","filter","shouldRemove","rangeHelpers","Math","max","user","userId","nickname","leftText","components","sort","reduce","curr","currentIndex","leftSpan","rightSpan","styles","mentionedText","strings","templateSpan","asMentionedMessageTemplate","join","template","actualMentionedUsers","offsetToMove","replaceWithRegex","templateRegex","match","matchIndex","groups","find","userIdSpan","userNicknameSpan","asMentionedMessageText","offsetAfterConverted","originalRange","convertedRange","push","message","Boolean","mentionedMessageTemplate","_templateRegex","createMentionTemplateRegex","createStyleSheet","fontWeight"],"sources":["MentionManager.tsx"],"sourcesContent":["import React from 'react';\n\nimport { Text, createStyleSheet } from '@sendbird/uikit-react-native-foundation';\nimport type { SendbirdFileMessage, SendbirdUser, SendbirdUserMessage } from '@sendbird/uikit-utils';\nimport { createMentionTemplateRegex, replaceWithRegex } from '@sendbird/uikit-utils';\n\nimport type { MentionedUser, Range } from '../types';\nimport type { MentionConfigInterface } from './MentionConfig';\n\nclass MentionManager {\n  private _invalidStartsKeywords: string[];\n  private _templateRegex: RegExp;\n\n  constructor(public config: MentionConfigInterface, public mentionEnabled: boolean) {\n    this._invalidStartsKeywords = [this.config.trigger, this.config.delimiter];\n    this._templateRegex = createMentionTemplateRegex(this.config.trigger);\n  }\n\n  public rangeHelpers = {\n    inRangeUnderOver(start: number, num: number, end: number) {\n      return start < num && num < end;\n    },\n    inRangeUnderMore(start: number, num: number, end: number) {\n      return start < num && num <= end;\n    },\n    inRangeLessOver(start: number, num: number, end: number) {\n      return start <= num && num < end;\n    },\n    inRangeLessMore(start: number, num: number, end: number) {\n      return start <= num && num <= end;\n    },\n    overlaps(a: Range, b: Range, compare: 'underOver' | 'underMore' | 'lessOver' | 'lessMore' = 'underOver') {\n      const inRange = {\n        underOver: this.inRangeUnderOver,\n        underMore: this.inRangeUnderMore,\n        lessOver: this.inRangeLessOver,\n        lessMore: this.inRangeLessMore,\n      }[compare];\n\n      return inRange(a.start, b.start, a.end) || inRange(a.start, b.end, a.end);\n    },\n  };\n\n  public get templateRegex() {\n    return this._templateRegex;\n  }\n\n  public getSearchString = (text: string, selectionIndex: number) => {\n    const lastSpan = text.slice(0, selectionIndex).split(this.config.delimiter).pop() ?? '';\n    const triggerIdx = lastSpan.indexOf(this.config.trigger);\n    const mentionSpan = triggerIdx === -1 ? lastSpan : lastSpan.slice(triggerIdx);\n    const searchString = mentionSpan.slice(this.config.trigger.length);\n\n    return {\n      searchString,\n      isTriggered: () => mentionSpan.startsWith(this.config.trigger),\n      isValidSearchString: () => this._invalidStartsKeywords.every((it) => !searchString.startsWith(it)),\n    };\n  };\n\n  /**\n   * @description Reconcile the range by offset in the mentioned users\n   * */\n  public reconcileRangeOfMentionedUsers = (offset: number, selectionIndex: number, mentionedUsers: MentionedUser[]) => {\n    return mentionedUsers.map((it) => {\n      // Changes only on the right text of selection.\n      if (selectionIndex <= it.range.start) {\n        return {\n          ...it,\n          range: {\n            start: it.range.start + offset,\n            end: it.range.end + offset,\n          },\n        };\n      }\n\n      return it;\n    });\n  };\n\n  /**\n   * @description Remove users who in a range\n   * */\n  public removeMentionedUsersInSelection = (selection: Range, mentionedUsers: MentionedUser[]) => {\n    let lastSelection = 0;\n    let removedOffset = 0;\n    const filtered = mentionedUsers.filter((it) => {\n      const shouldRemove = this.rangeHelpers.overlaps(selection, it.range, 'lessMore');\n      if (shouldRemove) {\n        lastSelection = Math.max(lastSelection, it.range.end);\n        removedOffset -= it.range.end - it.range.start;\n      }\n      return !shouldRemove;\n    });\n\n    return { filtered, lastSelection, removedOffset };\n  };\n\n  public getSearchStringRangeInText = (selectionIndex: number, searchString: string): Range => {\n    return {\n      start: selectionIndex - searchString.length - this.config.trigger.length,\n      end: selectionIndex,\n    };\n  };\n\n  /**\n   * @description User to @{user.id} template format\n   * */\n  public asMentionedMessageTemplate = (user: SendbirdUser, delimiter = false) => {\n    return `${this.config.trigger}{${user.userId}}` + (delimiter ? this.config.delimiter : '');\n  };\n\n  /**\n   * @description User to @user.nickname text format\n   * */\n  public asMentionedMessageText = (user: SendbirdUser, delimiter = false) => {\n    return `${this.config.trigger}${user.nickname}` + (delimiter ? this.config.delimiter : '');\n  };\n\n  /**\n   * @description Bold @user.nickname\n   * */\n  public textToMentionedComponents = (text: string, mentionedUsers: MentionedUser[]) => {\n    if (!this.mentionEnabled || mentionedUsers.length === 0) return text;\n\n    const { leftText, components } = mentionedUsers\n      .sort((a, b) => b.range.start - a.range.start)\n      .reduce(\n        ({ leftText, components }, curr, currentIndex) => {\n          const leftSpan = leftText.slice(0, curr.range.start);\n          const mentionSpan = leftText.slice(curr.range.start, curr.range.end);\n          const rightSpan = leftText.slice(curr.range.end);\n\n          return {\n            leftText: leftSpan,\n            components: [\n              <Text key={mentionSpan + currentIndex} style={styles.mentionedText}>\n                {mentionSpan}\n              </Text>,\n              rightSpan,\n              ...components,\n            ],\n          };\n        },\n        { leftText: text, components: [] as (string | JSX.Element)[] },\n      );\n\n    return [leftText, ...components];\n  };\n\n  public textToMentionedMessageTemplate = (text: string, mentionedUsers: MentionedUser[]) => {\n    if (!this.mentionEnabled) return text;\n\n    const { leftText, strings } = mentionedUsers\n      .sort((a, b) => b.range.start - a.range.start)\n      .reduce(\n        ({ leftText, strings }, curr) => {\n          const leftSpan = leftText.slice(0, curr.range.start);\n          const templateSpan = this.asMentionedMessageTemplate(curr.user);\n          const rightSpan = leftText.slice(curr.range.end);\n\n          return {\n            leftText: leftSpan,\n            strings: [templateSpan, rightSpan, ...strings],\n          };\n        },\n        { leftText: text, strings: [] as string[] },\n      );\n\n    return [leftText, ...strings].join('');\n  };\n\n  /**\n   * @description Convert @{user.id} template to @user.nickname text and MentionedUser[] array.\n   * */\n  public templateToTextAndMentionedUsers = (template: string, mentionedUsers: SendbirdUser[]) => {\n    const actualMentionedUsers: MentionedUser[] = [];\n\n    let offsetToMove = 0;\n    const mentionedText = replaceWithRegex(\n      template,\n      this.templateRegex,\n      ({ match, matchIndex, groups }) => {\n        const user = mentionedUsers.find((it) => it.userId === groups[2]);\n        if (user && typeof matchIndex === 'number') {\n          const userIdSpan = match;\n          const userNicknameSpan = this.asMentionedMessageText(user);\n\n          const offsetAfterConverted = userNicknameSpan.length - userIdSpan.length;\n\n          const originalRange: Range = {\n            start: matchIndex,\n            end: matchIndex + userIdSpan.length,\n          };\n\n          const convertedRange: Range = {\n            start: Math.max(0, originalRange.start + offsetToMove),\n            end: originalRange.end + offsetToMove + offsetAfterConverted,\n          };\n\n          offsetToMove += offsetAfterConverted;\n\n          actualMentionedUsers.push({ range: convertedRange, user });\n          return userNicknameSpan;\n        }\n        return match;\n      },\n      '',\n    ).join('');\n\n    return {\n      mentionedText,\n      mentionedUsers: actualMentionedUsers,\n    };\n  };\n\n  public shouldUseMentionedMessageTemplate = (\n    message?: SendbirdUserMessage | SendbirdFileMessage,\n  ): message is RequiredSpecific<\n    SendbirdUserMessage | SendbirdFileMessage,\n    'mentionedMessageTemplate' | 'mentionedUsers' | 'mentionedUserIds' | 'mentionType'\n  > => {\n    return Boolean(\n      this.mentionEnabled &&\n        message?.mentionedMessageTemplate &&\n        message?.mentionedUsers &&\n        message?.mentionedUsers.length > 0,\n    );\n  };\n}\n\ntype RequiredSpecific<T, K extends keyof T> = T & {\n  [P in K]-?: T[P];\n};\n\nconst styles = createStyleSheet({\n  mentionedText: { fontWeight: 'bold' },\n});\n\nexport default MentionManager;\n"],"mappings":"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"}