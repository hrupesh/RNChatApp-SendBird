{"version":3,"names":["COMPONENT_NAME","BottomSheetReactionAddon","onClose","message","channel","emojiManager","currentUser","sdk","useSendbirdChat","updateReactionFocusedItem","openReactionList","useReaction","colors","useUIKitTheme","id","useUniqId","left","right","useSafeAreaInsets","useChannelHandler","onReactionUpdated","eventChannel","event","url","messageId","getMessage","includeReactions","channelUrl","channelType","emojiAll","allEmoji","slice","color","ui","reaction","default","styles","container","marginRight","marginLeft","map","key","reactionUserIds","reactions","find","it","userIds","currentUserIdx","indexOf","userId","UNKNOWN_USER_ID","reacted","onPress","deleteReaction","addReaction","pressed","button","backgroundColor","selected","background","enabled","uri","emoji","onBackground03","createStyleSheet","paddingTop","paddingBottom","paddingHorizontal","flexDirection","justifyContent","width","height","padding","borderRadius"],"sources":["BottomSheetReactionAddon.tsx"],"sourcesContent":["import React from 'react';\nimport { Pressable, View } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport { Icon, Image, createStyleSheet, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { SendbirdBaseChannel, SendbirdBaseMessage, useUniqId } from '@sendbird/uikit-utils';\n\nimport { UNKNOWN_USER_ID } from '../../constants';\nimport { useReaction, useSendbirdChat } from '../../hooks/useContext';\n\ntype Props = {\n  onClose: () => Promise<void>;\n  channel: SendbirdBaseChannel;\n  message: SendbirdBaseMessage;\n};\nconst COMPONENT_NAME = 'BottomSheetReactionAddon';\nconst BottomSheetReactionAddon = ({ onClose, message, channel }: Props) => {\n  const { emojiManager, currentUser, sdk } = useSendbirdChat();\n  const { updateReactionFocusedItem, openReactionList } = useReaction();\n  const { colors } = useUIKitTheme();\n  const id = useUniqId(COMPONENT_NAME);\n  const { left, right } = useSafeAreaInsets();\n\n  useChannelHandler(sdk, COMPONENT_NAME + id, {\n    async onReactionUpdated(eventChannel, event) {\n      if (channel?.url === eventChannel.url && event.messageId === message?.messageId) {\n        updateReactionFocusedItem({\n          message: await sdk.message.getMessage({\n            includeReactions: true,\n            messageId: message.messageId,\n            channelUrl: message.channelUrl,\n            channelType: message.channelType,\n          }),\n        });\n      }\n    },\n  });\n\n  const emojiAll = emojiManager.allEmoji.slice(0, 5);\n  const color = colors.ui.reaction.default;\n\n  return (\n    <View style={[styles.container, { marginRight: right, marginLeft: left }]}>\n      {emojiAll.map(({ key, url }) => {\n        const reactionUserIds = message?.reactions?.find((it) => it.key === key)?.userIds ?? [];\n        const currentUserIdx = reactionUserIds.indexOf(currentUser?.userId ?? UNKNOWN_USER_ID);\n        const reacted = currentUserIdx > -1;\n\n        const onPress = () => {\n          if (reacted) channel.deleteReaction(message, key);\n          else channel.addReaction(message, key);\n          onClose();\n        };\n\n        return (\n          <Pressable\n            key={key}\n            onPress={onPress}\n            style={({ pressed }) => [\n              styles.button,\n              { backgroundColor: reacted || pressed ? color.selected.background : color.enabled.background },\n            ]}\n          >\n            <Image source={{ uri: url }} style={styles.emoji} />\n          </Pressable>\n        );\n      })}\n\n      <Pressable\n        onPress={async () => {\n          await onClose();\n          openReactionList({ channel, message });\n        }}\n        style={({ pressed }) => [\n          styles.button,\n          { backgroundColor: pressed ? color.selected.background : color.enabled.background },\n        ]}\n      >\n        <Icon icon={'emoji-more'} style={styles.emoji} color={colors.onBackground03} />\n      </Pressable>\n    </View>\n  );\n};\n\nconst styles = createStyleSheet({\n  container: {\n    paddingTop: 12,\n    paddingBottom: 16,\n    paddingHorizontal: 18,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  button: {\n    width: 44,\n    height: 44,\n    padding: 4,\n    borderRadius: 8,\n  },\n  emoji: {\n    width: '100%',\n    height: '100%',\n  },\n});\n\nexport default BottomSheetReactionAddon;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAEA;;AACA;;;;AAOA,MAAMA,cAAc,GAAG,0BAAvB;;AACA,MAAMC,wBAAwB,GAAG,QAA0C;EAAA,IAAzC;IAAEC,OAAF;IAAWC,OAAX;IAAoBC;EAApB,CAAyC;EACzE,MAAM;IAAEC,YAAF;IAAgBC,WAAhB;IAA6BC;EAA7B,IAAqC,IAAAC,2BAAA,GAA3C;EACA,MAAM;IAAEC,yBAAF;IAA6BC;EAA7B,IAAkD,IAAAC,uBAAA,GAAxD;EACA,MAAM;IAAEC;EAAF,IAAa,IAAAC,yCAAA,GAAnB;EACA,MAAMC,EAAE,GAAG,IAAAC,qBAAA,EAAUf,cAAV,CAAX;EACA,MAAM;IAAEgB,IAAF;IAAQC;EAAR,IAAkB,IAAAC,6CAAA,GAAxB;EAEA,IAAAC,iCAAA,EAAkBZ,GAAlB,EAAuBP,cAAc,GAAGc,EAAxC,EAA4C;IAC1C,MAAMM,iBAAN,CAAwBC,YAAxB,EAAsCC,KAAtC,EAA6C;MAC3C,IAAI,CAAAlB,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEmB,GAAT,MAAiBF,YAAY,CAACE,GAA9B,IAAqCD,KAAK,CAACE,SAAN,MAAoBrB,OAApB,aAAoBA,OAApB,uBAAoBA,OAAO,CAAEqB,SAA7B,CAAzC,EAAiF;QAC/Ef,yBAAyB,CAAC;UACxBN,OAAO,EAAE,MAAMI,GAAG,CAACJ,OAAJ,CAAYsB,UAAZ,CAAuB;YACpCC,gBAAgB,EAAE,IADkB;YAEpCF,SAAS,EAAErB,OAAO,CAACqB,SAFiB;YAGpCG,UAAU,EAAExB,OAAO,CAACwB,UAHgB;YAIpCC,WAAW,EAAEzB,OAAO,CAACyB;UAJe,CAAvB;QADS,CAAD,CAAzB;MAQD;IACF;;EAZyC,CAA5C;EAeA,MAAMC,QAAQ,GAAGxB,YAAY,CAACyB,QAAb,CAAsBC,KAAtB,CAA4B,CAA5B,EAA+B,CAA/B,CAAjB;EACA,MAAMC,KAAK,GAAGpB,MAAM,CAACqB,EAAP,CAAUC,QAAV,CAAmBC,OAAjC;EAEA,oBACE,6BAAC,iBAAD;IAAM,KAAK,EAAE,CAACC,MAAM,CAACC,SAAR,EAAmB;MAAEC,WAAW,EAAErB,KAAf;MAAsBsB,UAAU,EAAEvB;IAAlC,CAAnB;EAAb,GACGa,QAAQ,CAACW,GAAT,CAAa,SAAkB;IAAA;;IAAA,IAAjB;MAAEC,GAAF;MAAOlB;IAAP,CAAiB;IAC9B,MAAMmB,eAAe,GAAG,CAAAvC,OAAO,SAAP,IAAAA,OAAO,WAAP,kCAAAA,OAAO,CAAEwC,SAAT,mGAAoBC,IAApB,CAA0BC,EAAD,IAAQA,EAAE,CAACJ,GAAH,KAAWA,GAA5C,iFAAkDK,OAAlD,KAA6D,EAArF;IACA,MAAMC,cAAc,GAAGL,eAAe,CAACM,OAAhB,CAAwB,CAAA1C,WAAW,SAAX,IAAAA,WAAW,WAAX,YAAAA,WAAW,CAAE2C,MAAb,KAAuBC,0BAA/C,CAAvB;IACA,MAAMC,OAAO,GAAGJ,cAAc,GAAG,CAAC,CAAlC;;IAEA,MAAMK,OAAO,GAAG,MAAM;MACpB,IAAID,OAAJ,EAAa/C,OAAO,CAACiD,cAAR,CAAuBlD,OAAvB,EAAgCsC,GAAhC,EAAb,KACKrC,OAAO,CAACkD,WAAR,CAAoBnD,OAApB,EAA6BsC,GAA7B;MACLvC,OAAO;IACR,CAJD;;IAMA,oBACE,6BAAC,sBAAD;MACE,GAAG,EAAEuC,GADP;MAEE,OAAO,EAAEW,OAFX;MAGE,KAAK,EAAE;QAAA,IAAC;UAAEG;QAAF,CAAD;QAAA,OAAiB,CACtBnB,MAAM,CAACoB,MADe,EAEtB;UAAEC,eAAe,EAAEN,OAAO,IAAII,OAAX,GAAqBvB,KAAK,CAAC0B,QAAN,CAAeC,UAApC,GAAiD3B,KAAK,CAAC4B,OAAN,CAAcD;QAAlF,CAFsB,CAAjB;MAAA;IAHT,gBAQE,6BAAC,iCAAD;MAAO,MAAM,EAAE;QAAEE,GAAG,EAAEtC;MAAP,CAAf;MAA6B,KAAK,EAAEa,MAAM,CAAC0B;IAA3C,EARF,CADF;EAYD,CAvBA,CADH,eA0BE,6BAAC,sBAAD;IACE,OAAO,EAAE,YAAY;MACnB,MAAM5D,OAAO,EAAb;MACAQ,gBAAgB,CAAC;QAAEN,OAAF;QAAWD;MAAX,CAAD,CAAhB;IACD,CAJH;IAKE,KAAK,EAAE;MAAA,IAAC;QAAEoD;MAAF,CAAD;MAAA,OAAiB,CACtBnB,MAAM,CAACoB,MADe,EAEtB;QAAEC,eAAe,EAAEF,OAAO,GAAGvB,KAAK,CAAC0B,QAAN,CAAeC,UAAlB,GAA+B3B,KAAK,CAAC4B,OAAN,CAAcD;MAAvE,CAFsB,CAAjB;IAAA;EALT,gBAUE,6BAAC,gCAAD;IAAM,IAAI,EAAE,YAAZ;IAA0B,KAAK,EAAEvB,MAAM,CAAC0B,KAAxC;IAA+C,KAAK,EAAElD,MAAM,CAACmD;EAA7D,EAVF,CA1BF,CADF;AAyCD,CAlED;;AAoEA,MAAM3B,MAAM,GAAG,IAAA4B,4CAAA,EAAiB;EAC9B3B,SAAS,EAAE;IACT4B,UAAU,EAAE,EADH;IAETC,aAAa,EAAE,EAFN;IAGTC,iBAAiB,EAAE,EAHV;IAITC,aAAa,EAAE,KAJN;IAKTC,cAAc,EAAE;EALP,CADmB;EAQ9Bb,MAAM,EAAE;IACNc,KAAK,EAAE,EADD;IAENC,MAAM,EAAE,EAFF;IAGNC,OAAO,EAAE,CAHH;IAINC,YAAY,EAAE;EAJR,CARsB;EAc9BX,KAAK,EAAE;IACLQ,KAAK,EAAE,MADF;IAELC,MAAM,EAAE;EAFH;AAduB,CAAjB,CAAf;eAoBetE,wB"}