{"version":3,"names":["HOOK_NAME","createGroupChannelMutedMembersFragment","initModule","GroupChannelMutedMembersModule","createGroupChannelMutedMembersModule","onPressHeaderLeft","NOOP","channel","renderUser","uniqId","useUniqId","STRINGS","useLocalization","sdk","currentUser","useSendbirdChat","openMenu","useActionMenu","users","deleteUser","loading","refresh","error","next","useUserList","queryCreator","createMutedUserListQuery","limit","useChannelHandler","onUserLeft","eventChannel","user","isDifferentChannel","userId","onUserBanned","_renderUser","useFreshCallback","props","profileUrl","nickname","LABELS","USER_NO_NAME","USER_BAR_ME_POSTFIX","title","menuItems","UNMUTE","onPress","unmuteUser","then","Boolean"],"sources":["createGroupChannelMutedMembersFragment.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useChannelHandler, useUserList } from '@sendbird/uikit-chat-hooks';\nimport { useActionMenu } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, isDifferentChannel, useFreshCallback, useUniqId } from '@sendbird/uikit-utils';\n\nimport StatusComposition from '../components/StatusComposition';\nimport UserActionBar from '../components/UserActionBar';\nimport { createGroupChannelMutedMembersModule } from '../domain/groupChannelMutedMembers';\nimport type {\n  GroupChannelMutedMembersFragment,\n  GroupChannelMutedMembersModule,\n} from '../domain/groupChannelMutedMembers/types';\nimport { useLocalization, useSendbirdChat } from '../hooks/useContext';\n\nconst HOOK_NAME = 'createGroupChannelMutedMembersFragment';\nconst createGroupChannelMutedMembersFragment = (\n  initModule?: Partial<GroupChannelMutedMembersModule>,\n): GroupChannelMutedMembersFragment => {\n  const GroupChannelMutedMembersModule = createGroupChannelMutedMembersModule(initModule);\n\n  return ({ onPressHeaderLeft = NOOP, channel, renderUser }) => {\n    const uniqId = useUniqId(HOOK_NAME);\n\n    const { STRINGS } = useLocalization();\n    const { sdk, currentUser } = useSendbirdChat();\n    const { openMenu } = useActionMenu();\n\n    const { users, deleteUser, loading, refresh, error, next } = useUserList(sdk, {\n      queryCreator: () => channel.createMutedUserListQuery({ limit: 20 }),\n    });\n\n    useChannelHandler(sdk, `${HOOK_NAME}_${uniqId}`, {\n      onUserLeft(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n      onUserBanned(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n    });\n\n    const _renderUser: NonNullable<typeof renderUser> = useFreshCallback((props) => {\n      if (renderUser) return renderUser(props);\n\n      const { user } = props;\n      return (\n        <UserActionBar\n          muted\n          uri={user.profileUrl}\n          name={\n            (user.nickname || STRINGS.LABELS.USER_NO_NAME) +\n            (user.userId === currentUser?.userId ? STRINGS.LABELS.USER_BAR_ME_POSTFIX : '')\n          }\n          disabled={user.userId === currentUser?.userId}\n          onPressActionMenu={() => {\n            openMenu({\n              title: user.nickname || STRINGS.LABELS.USER_NO_NAME,\n              menuItems: [\n                {\n                  title: STRINGS.LABELS.UNMUTE,\n                  onPress: () => channel.unmuteUser(user).then(() => deleteUser(user.userId)),\n                },\n              ],\n            });\n          }}\n        />\n      );\n    });\n\n    return (\n      <GroupChannelMutedMembersModule.Provider channel={channel}>\n        <GroupChannelMutedMembersModule.Header onPressHeaderLeft={onPressHeaderLeft} />\n        <StatusComposition\n          loading={loading}\n          LoadingComponent={<GroupChannelMutedMembersModule.StatusLoading />}\n          error={Boolean(error)}\n          ErrorComponent={<GroupChannelMutedMembersModule.StatusError onPressRetry={refresh} />}\n        >\n          <GroupChannelMutedMembersModule.List\n            mutedMembers={users}\n            onLoadNext={next}\n            renderUser={_renderUser}\n            ListEmptyComponent={<GroupChannelMutedMembersModule.StatusEmpty />}\n          />\n        </StatusComposition>\n      </GroupChannelMutedMembersModule.Provider>\n    );\n  };\n};\n\nexport default createGroupChannelMutedMembersFragment;\n"],"mappings":"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"}