{"version":3,"names":["React","useLayoutEffect","useMemo","useRef","useState","Platform","SafeAreaProvider","Sendbird","GroupChannelModule","OpenChannelModule","DialogProvider","Header","HeaderStyleProvider","LightUIKitTheme","ToastProvider","UIKitThemeProvider","useIsFirstMount","LocalizationContext","LocalizationProvider","PlatformServiceProvider","ReactionProvider","SendbirdChatProvider","UserProfileProvider","EmojiManager","ImageCompressionConfig","InternalLocalCacheStorage","MentionConfig","MentionManager","StringSetEn","SBUDynamicModule","VERSION","InternalErrorBoundaryContainer","NetInfo","get","SendbirdUIKit","Object","freeze","PLATFORM","OS","toLowerCase","DEFAULT","AUTO_PUSH_TOKEN_REGISTRATION","CHANNEL_LIST_TYPING_INDICATOR","CHANNEL_LIST_MESSAGE_RECEIPT_STATUS","USE_USER_ID_FOR_NICKNAME","USER_MENTION","IMAGE_COMPRESSION","SendbirdUIKitContainer","children","appId","chatOptions","platformServices","localization","styles","errorBoundary","toast","userProfile","userMention","imageCompression","defaultStringSet","stringSet","isFirstMount","unsubscribes","internalStorage","localCacheStorage","undefined","sdkInstance","setSdkInstance","sendbird","initializeSendbird","onInitialized","current","chatSDK","emojiManager","mentionManager","config","mentionLimit","MENTION_LIMIT","suggestionLimit","SUGGESTION_LIMIT","debounceMills","DEBOUNCE_MILLS","delimiter","DELIMITER","trigger","TRIGGER","enableUserMention","imageCompressionConfig","compressionRate","COMPRESSION_RATE","width","height","forEach","u","enableAutoPushTokenRegistration","enableChannelListTypingIndicator","enableChannelListMessageReceiptStatus","enableUseUserIdForNickname","enableImageCompression","file","notification","clipboard","media","theme","HeaderComponent","defaultHeaderTitleAlign","statusBarTranslucent","dismissTimeout","onCreateChannel","onBeforeCreateChannel","value","STRINGS","alert","ok","DIALOG","ALERT_DEFAULT_OK","prompt","PROMPT_DEFAULT_OK","cancel","PROMPT_DEFAULT_CANCEL","placeholder","PROMPT_DEFAULT_PLACEHOLDER","init","modules","localCacheEnabled","Boolean","useAsyncStorageStore","newInstance","addExtension","addEventListener","listener","callback","callbackType","unsubscribe","state","online","isConnected","isInternetReachable","push","setOnlineListener","onOnline","setOfflineListener","onOffline"],"sources":["SendbirdUIKitContainer.tsx"],"sourcesContent":["import React, { useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { Platform } from 'react-native';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nimport Sendbird from '@sendbird/chat';\nimport { GroupChannelModule } from '@sendbird/chat/groupChannel';\nimport { OpenChannelModule } from '@sendbird/chat/openChannel';\nimport type { HeaderStyleContextType, UIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport {\n  DialogProvider,\n  Header,\n  HeaderStyleProvider,\n  LightUIKitTheme,\n  ToastProvider,\n  UIKitThemeProvider,\n} from '@sendbird/uikit-react-native-foundation';\nimport type {\n  SendbirdBaseChannel,\n  SendbirdChatSDK,\n  SendbirdGroupChannelCreateParams,\n  SendbirdMember,\n  SendbirdUser,\n} from '@sendbird/uikit-utils';\nimport { useIsFirstMount } from '@sendbird/uikit-utils';\n\nimport { LocalizationContext, LocalizationProvider } from '../contexts/LocalizationCtx';\nimport { PlatformServiceProvider } from '../contexts/PlatformServiceCtx';\nimport { ReactionProvider } from '../contexts/ReactionCtx';\nimport type { UIKitFeaturesInSendbirdChatContext } from '../contexts/SendbirdChatCtx';\nimport { SendbirdChatProvider } from '../contexts/SendbirdChatCtx';\nimport { UserProfileProvider } from '../contexts/UserProfileCtx';\nimport EmojiManager from '../libs/EmojiManager';\nimport type { ImageCompressionConfigInterface } from '../libs/ImageCompressionConfig';\nimport ImageCompressionConfig from '../libs/ImageCompressionConfig';\nimport InternalLocalCacheStorage from '../libs/InternalLocalCacheStorage';\nimport MentionConfig, { MentionConfigInterface } from '../libs/MentionConfig';\nimport MentionManager from '../libs/MentionManager';\nimport StringSetEn from '../localization/StringSet.en';\nimport type { StringSet } from '../localization/StringSet.type';\nimport SBUDynamicModule from '../platform/dynamicModule';\nimport type {\n  ClipboardServiceInterface,\n  FileServiceInterface,\n  MediaServiceInterface,\n  NotificationServiceInterface,\n} from '../platform/types';\nimport type { ErrorBoundaryProps, LocalCacheStorage } from '../types';\nimport VERSION from '../version';\nimport InternalErrorBoundaryContainer from './InternalErrorBoundaryContainer';\n\nconst NetInfo = SBUDynamicModule.get('@react-native-community/netinfo', 'warn');\n\nexport const SendbirdUIKit = Object.freeze({\n  VERSION,\n  PLATFORM: Platform.OS.toLowerCase(),\n  DEFAULT: {\n    AUTO_PUSH_TOKEN_REGISTRATION: true,\n    CHANNEL_LIST_TYPING_INDICATOR: false,\n    CHANNEL_LIST_MESSAGE_RECEIPT_STATUS: false,\n    USE_USER_ID_FOR_NICKNAME: false,\n    USER_MENTION: false,\n    IMAGE_COMPRESSION: true,\n  },\n});\n\nexport type SendbirdUIKitContainerProps = React.PropsWithChildren<{\n  appId: string;\n  platformServices: {\n    file: FileServiceInterface;\n    notification: NotificationServiceInterface;\n    clipboard: ClipboardServiceInterface;\n    media: MediaServiceInterface;\n  };\n  chatOptions?: {\n    localCacheStorage?: LocalCacheStorage;\n    onInitialized?: (sdkInstance: SendbirdChatSDK) => SendbirdChatSDK;\n  } & Partial<UIKitFeaturesInSendbirdChatContext>;\n  localization?: {\n    stringSet?: StringSet;\n  };\n  styles?: {\n    theme?: UIKitTheme;\n    statusBarTranslucent?: boolean;\n    defaultHeaderTitleAlign?: 'left' | 'center';\n    defaultHeaderHeight?: number;\n    HeaderComponent?: HeaderStyleContextType['HeaderComponent'];\n  };\n  errorBoundary?: {\n    onError?: (props: ErrorBoundaryProps) => void;\n    ErrorInfoComponent?: (props: ErrorBoundaryProps) => JSX.Element;\n  };\n  toast?: {\n    dismissTimeout?: number;\n  };\n  userProfile?: {\n    onCreateChannel: (channel: SendbirdBaseChannel) => void;\n    onBeforeCreateChannel?: (\n      channelParams: SendbirdGroupChannelCreateParams,\n      users: SendbirdUser[] | SendbirdMember[],\n    ) => SendbirdGroupChannelCreateParams | Promise<SendbirdGroupChannelCreateParams>;\n  };\n  userMention?: Pick<Partial<MentionConfigInterface>, 'mentionLimit' | 'suggestionLimit' | 'debounceMills'>;\n  imageCompression?: Partial<ImageCompressionConfigInterface>;\n}>;\n\nconst SendbirdUIKitContainer = ({\n  children,\n  appId,\n  chatOptions,\n  platformServices,\n  localization,\n  styles,\n  errorBoundary,\n  toast,\n  userProfile,\n  userMention,\n  imageCompression,\n}: SendbirdUIKitContainerProps) => {\n  const defaultStringSet = localization?.stringSet ?? StringSetEn;\n\n  const isFirstMount = useIsFirstMount();\n  const unsubscribes = useRef<Array<() => void>>([]);\n  const internalStorage = useMemo(\n    () => (chatOptions?.localCacheStorage ? new InternalLocalCacheStorage(chatOptions.localCacheStorage) : undefined),\n    [chatOptions?.localCacheStorage],\n  );\n\n  const [sdkInstance, setSdkInstance] = useState<SendbirdChatSDK>(() => {\n    const sendbird = initializeSendbird(appId, internalStorage, chatOptions?.onInitialized);\n    unsubscribes.current = sendbird.unsubscribes;\n    return sendbird.chatSDK;\n  });\n\n  const emojiManager = useMemo(() => new EmojiManager(internalStorage), [internalStorage]);\n\n  const mentionManager = useMemo(() => {\n    const config = new MentionConfig({\n      mentionLimit: userMention?.mentionLimit || MentionConfig.DEFAULT.MENTION_LIMIT,\n      suggestionLimit: userMention?.suggestionLimit || MentionConfig.DEFAULT.SUGGESTION_LIMIT,\n      debounceMills: userMention?.debounceMills ?? MentionConfig.DEFAULT.DEBOUNCE_MILLS,\n      delimiter: MentionConfig.DEFAULT.DELIMITER,\n      trigger: MentionConfig.DEFAULT.TRIGGER,\n    });\n    return new MentionManager(config, chatOptions?.enableUserMention ?? SendbirdUIKit.DEFAULT.USER_MENTION);\n  }, [userMention?.mentionLimit, userMention?.suggestionLimit, userMention?.debounceMills]);\n\n  const imageCompressionConfig = useMemo(\n    () =>\n      new ImageCompressionConfig({\n        compressionRate: imageCompression?.compressionRate || ImageCompressionConfig.DEFAULT.COMPRESSION_RATE,\n        width: imageCompression?.width,\n        height: imageCompression?.height,\n      }),\n    [imageCompression?.compressionRate, imageCompression?.width, imageCompression?.height],\n  );\n\n  useLayoutEffect(() => {\n    if (!isFirstMount) {\n      const sendbird = initializeSendbird(appId, internalStorage, chatOptions?.onInitialized);\n      setSdkInstance(sendbird.chatSDK);\n      unsubscribes.current = sendbird.unsubscribes;\n    }\n\n    return () => {\n      if (!isFirstMount) {\n        unsubscribes.current.forEach((u) => {\n          try {\n            u();\n          } catch {}\n        });\n      }\n    };\n  }, [appId, internalStorage]);\n\n  return (\n    <SafeAreaProvider>\n      <SendbirdChatProvider\n        sdkInstance={sdkInstance}\n        emojiManager={emojiManager}\n        mentionManager={mentionManager}\n        imageCompressionConfig={imageCompressionConfig}\n        enableAutoPushTokenRegistration={\n          chatOptions?.enableAutoPushTokenRegistration ?? SendbirdUIKit.DEFAULT.AUTO_PUSH_TOKEN_REGISTRATION\n        }\n        enableChannelListTypingIndicator={\n          chatOptions?.enableChannelListTypingIndicator ?? SendbirdUIKit.DEFAULT.CHANNEL_LIST_TYPING_INDICATOR\n        }\n        enableChannelListMessageReceiptStatus={\n          chatOptions?.enableChannelListMessageReceiptStatus ??\n          SendbirdUIKit.DEFAULT.CHANNEL_LIST_MESSAGE_RECEIPT_STATUS\n        }\n        enableUseUserIdForNickname={\n          chatOptions?.enableUseUserIdForNickname ?? SendbirdUIKit.DEFAULT.USE_USER_ID_FOR_NICKNAME\n        }\n        enableUserMention={chatOptions?.enableUserMention ?? SendbirdUIKit.DEFAULT.USER_MENTION}\n        enableImageCompression={chatOptions?.enableImageCompression ?? SendbirdUIKit.DEFAULT.IMAGE_COMPRESSION}\n      >\n        <LocalizationProvider stringSet={defaultStringSet}>\n          <PlatformServiceProvider\n            fileService={platformServices.file}\n            notificationService={platformServices.notification}\n            clipboardService={platformServices.clipboard}\n            mediaService={platformServices.media}\n          >\n            <UIKitThemeProvider theme={styles?.theme ?? LightUIKitTheme}>\n              <HeaderStyleProvider\n                HeaderComponent={styles?.HeaderComponent ?? Header}\n                defaultTitleAlign={styles?.defaultHeaderTitleAlign ?? 'left'}\n                statusBarTranslucent={styles?.statusBarTranslucent ?? true}\n              >\n                <ToastProvider dismissTimeout={toast?.dismissTimeout}>\n                  <UserProfileProvider\n                    onCreateChannel={userProfile?.onCreateChannel}\n                    onBeforeCreateChannel={userProfile?.onBeforeCreateChannel}\n                  >\n                    <ReactionProvider>\n                      <LocalizationContext.Consumer>\n                        {(value) => {\n                          const STRINGS = value?.STRINGS || defaultStringSet;\n                          return (\n                            <DialogProvider\n                              defaultLabels={{\n                                alert: { ok: STRINGS.DIALOG.ALERT_DEFAULT_OK },\n                                prompt: {\n                                  ok: STRINGS.DIALOG.PROMPT_DEFAULT_OK,\n                                  cancel: STRINGS.DIALOG.PROMPT_DEFAULT_CANCEL,\n                                  placeholder: STRINGS.DIALOG.PROMPT_DEFAULT_PLACEHOLDER,\n                                },\n                              }}\n                            >\n                              <InternalErrorBoundaryContainer {...errorBoundary}>\n                                {children}\n                              </InternalErrorBoundaryContainer>\n                            </DialogProvider>\n                          );\n                        }}\n                      </LocalizationContext.Consumer>\n                    </ReactionProvider>\n                  </UserProfileProvider>\n                </ToastProvider>\n              </HeaderStyleProvider>\n            </UIKitThemeProvider>\n          </PlatformServiceProvider>\n        </LocalizationProvider>\n      </SendbirdChatProvider>\n    </SafeAreaProvider>\n  );\n};\n\nconst initializeSendbird = (\n  appId: string,\n  internalStorage?: InternalLocalCacheStorage,\n  onInitialized?: (sdk: SendbirdChatSDK) => SendbirdChatSDK,\n) => {\n  const unsubscribes: Array<() => void> = [];\n  let chatSDK: SendbirdChatSDK;\n\n  chatSDK = Sendbird.init({\n    appId,\n    modules: [new GroupChannelModule(), new OpenChannelModule()],\n    localCacheEnabled: Boolean(internalStorage),\n    useAsyncStorageStore: internalStorage as never,\n    newInstance: true,\n  });\n\n  if (onInitialized) {\n    chatSDK = onInitialized(chatSDK);\n  }\n\n  if (SendbirdUIKit.VERSION) {\n    chatSDK.addExtension('sb_uikit', SendbirdUIKit.VERSION);\n  }\n\n  if (SendbirdUIKit.PLATFORM) {\n    chatSDK.addExtension('device-os-platform', SendbirdUIKit.PLATFORM);\n  }\n\n  if (NetInfo?.addEventListener) {\n    const listener = (callback: () => void, callbackType: 'online' | 'offline') => {\n      const unsubscribe = NetInfo.addEventListener((state) => {\n        const online = Boolean(state.isConnected) || Boolean(state.isInternetReachable);\n        if (online && callbackType === 'online') callback();\n        if (!online && callbackType === 'offline') callback();\n      });\n      unsubscribes.push(unsubscribe);\n      return unsubscribe;\n    };\n    chatSDK.setOnlineListener?.((onOnline) => listener(onOnline, 'online'));\n    chatSDK.setOfflineListener?.((onOffline) => listener(onOffline, 'offline'));\n  }\n  return { chatSDK, unsubscribes };\n};\n\nexport default SendbirdUIKitContainer;\n"],"mappings":"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"}