{"version":3,"names":["React","useChannelHandler","useUserList","useActionMenu","NOOP","isDifferentChannel","useFreshCallback","useUniqId","StatusComposition","UserActionBar","createGroupChannelMutedMembersModule","useLocalization","useSendbirdChat","HOOK_NAME","createGroupChannelMutedMembersFragment","initModule","GroupChannelMutedMembersModule","onPressHeaderLeft","channel","renderUser","uniqId","STRINGS","sdk","currentUser","openMenu","users","deleteUser","loading","refresh","error","next","queryCreator","createMutedUserListQuery","limit","onUserLeft","eventChannel","user","userId","onUserBanned","_renderUser","props","profileUrl","nickname","LABELS","USER_NO_NAME","USER_BAR_ME_POSTFIX","title","menuItems","UNMUTE","onPress","unmuteUser","then","Boolean"],"sources":["createGroupChannelMutedMembersFragment.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useChannelHandler, useUserList } from '@sendbird/uikit-chat-hooks';\nimport { useActionMenu } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, isDifferentChannel, useFreshCallback, useUniqId } from '@sendbird/uikit-utils';\n\nimport StatusComposition from '../components/StatusComposition';\nimport UserActionBar from '../components/UserActionBar';\nimport { createGroupChannelMutedMembersModule } from '../domain/groupChannelMutedMembers';\nimport type {\n  GroupChannelMutedMembersFragment,\n  GroupChannelMutedMembersModule,\n} from '../domain/groupChannelMutedMembers/types';\nimport { useLocalization, useSendbirdChat } from '../hooks/useContext';\n\nconst HOOK_NAME = 'createGroupChannelMutedMembersFragment';\nconst createGroupChannelMutedMembersFragment = (\n  initModule?: Partial<GroupChannelMutedMembersModule>,\n): GroupChannelMutedMembersFragment => {\n  const GroupChannelMutedMembersModule = createGroupChannelMutedMembersModule(initModule);\n\n  return ({ onPressHeaderLeft = NOOP, channel, renderUser }) => {\n    const uniqId = useUniqId(HOOK_NAME);\n\n    const { STRINGS } = useLocalization();\n    const { sdk, currentUser } = useSendbirdChat();\n    const { openMenu } = useActionMenu();\n\n    const { users, deleteUser, loading, refresh, error, next } = useUserList(sdk, {\n      queryCreator: () => channel.createMutedUserListQuery({ limit: 20 }),\n    });\n\n    useChannelHandler(sdk, `${HOOK_NAME}_${uniqId}`, {\n      onUserLeft(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n      onUserBanned(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n    });\n\n    const _renderUser: NonNullable<typeof renderUser> = useFreshCallback((props) => {\n      if (renderUser) return renderUser(props);\n\n      const { user } = props;\n      return (\n        <UserActionBar\n          muted\n          uri={user.profileUrl}\n          name={\n            (user.nickname || STRINGS.LABELS.USER_NO_NAME) +\n            (user.userId === currentUser?.userId ? STRINGS.LABELS.USER_BAR_ME_POSTFIX : '')\n          }\n          disabled={user.userId === currentUser?.userId}\n          onPressActionMenu={() => {\n            openMenu({\n              title: user.nickname || STRINGS.LABELS.USER_NO_NAME,\n              menuItems: [\n                {\n                  title: STRINGS.LABELS.UNMUTE,\n                  onPress: () => channel.unmuteUser(user).then(() => deleteUser(user.userId)),\n                },\n              ],\n            });\n          }}\n        />\n      );\n    });\n\n    return (\n      <GroupChannelMutedMembersModule.Provider channel={channel}>\n        <GroupChannelMutedMembersModule.Header onPressHeaderLeft={onPressHeaderLeft} />\n        <StatusComposition\n          loading={loading}\n          LoadingComponent={<GroupChannelMutedMembersModule.StatusLoading />}\n          error={Boolean(error)}\n          ErrorComponent={<GroupChannelMutedMembersModule.StatusError onPressRetry={refresh} />}\n        >\n          <GroupChannelMutedMembersModule.List\n            mutedMembers={users}\n            onLoadNext={next}\n            renderUser={_renderUser}\n            ListEmptyComponent={<GroupChannelMutedMembersModule.StatusEmpty />}\n          />\n        </StatusComposition>\n      </GroupChannelMutedMembersModule.Provider>\n    );\n  };\n};\n\nexport default createGroupChannelMutedMembersFragment;\n"],"mappings":"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"}