{"version":3,"names":["React","useUserList","useActionMenu","NOOP","useFreshCallback","StatusComposition","UserActionBar","createGroupChannelBannedUsersModule","useLocalization","useSendbirdChat","createGroupChannelBannedUsersFragment","initModule","GroupChannelBannedUsersModule","onPressHeaderLeft","channel","renderUser","STRINGS","currentUser","sdk","openMenu","users","deleteUser","loading","next","refresh","error","queryCreator","createBannedUserListQuery","limit","_renderUser","props","user","profileUrl","nickname","LABELS","USER_NO_NAME","userId","USER_BAR_ME_POSTFIX","title","menuItems","UNBAN","onPress","unbanUser","then","Boolean"],"sources":["createGroupChannelBannedUsersFragment.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useUserList } from '@sendbird/uikit-chat-hooks';\nimport { useActionMenu } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, useFreshCallback } from '@sendbird/uikit-utils';\n\nimport StatusComposition from '../components/StatusComposition';\nimport UserActionBar from '../components/UserActionBar';\nimport { createGroupChannelBannedUsersModule } from '../domain/groupChannelBannedUsers';\nimport type {\n  GroupChannelBannedUsersFragment,\n  GroupChannelBannedUsersModule,\n} from '../domain/groupChannelBannedUsers/types';\nimport { useLocalization, useSendbirdChat } from '../hooks/useContext';\n\nconst createGroupChannelBannedUsersFragment = (\n  initModule?: Partial<GroupChannelBannedUsersModule>,\n): GroupChannelBannedUsersFragment => {\n  const GroupChannelBannedUsersModule = createGroupChannelBannedUsersModule(initModule);\n\n  return ({ onPressHeaderLeft = NOOP, channel, renderUser }) => {\n    const { STRINGS } = useLocalization();\n    const { currentUser, sdk } = useSendbirdChat();\n    const { openMenu } = useActionMenu();\n\n    const { users, deleteUser, loading, next, refresh, error } = useUserList(sdk, {\n      queryCreator: () => channel.createBannedUserListQuery({ limit: 20 }),\n    });\n\n    const _renderUser: NonNullable<typeof renderUser> = useFreshCallback((props) => {\n      if (renderUser) return renderUser(props);\n\n      const { user } = props;\n\n      return (\n        <UserActionBar\n          muted={false}\n          uri={user.profileUrl}\n          name={\n            (user.nickname || STRINGS.LABELS.USER_NO_NAME) +\n            (user.userId === currentUser?.userId ? STRINGS.LABELS.USER_BAR_ME_POSTFIX : '')\n          }\n          disabled={user.userId === currentUser?.userId}\n          onPressActionMenu={() => {\n            openMenu({\n              title: user.nickname || STRINGS.LABELS.USER_NO_NAME,\n              menuItems: [\n                {\n                  title: STRINGS.LABELS.UNBAN,\n                  onPress: () => channel.unbanUser(user).then(() => deleteUser(user.userId)),\n                },\n              ],\n            });\n          }}\n        />\n      );\n    });\n\n    return (\n      <GroupChannelBannedUsersModule.Provider channel={channel}>\n        <GroupChannelBannedUsersModule.Header onPressHeaderLeft={onPressHeaderLeft} />\n        <StatusComposition\n          loading={loading}\n          LoadingComponent={<GroupChannelBannedUsersModule.StatusLoading />}\n          error={Boolean(error)}\n          ErrorComponent={<GroupChannelBannedUsersModule.StatusError onPressRetry={refresh} />}\n        >\n          <GroupChannelBannedUsersModule.List\n            bannedUsers={users}\n            renderUser={_renderUser}\n            ListEmptyComponent={<GroupChannelBannedUsersModule.StatusEmpty />}\n            onLoadNext={next}\n          />\n        </StatusComposition>\n      </GroupChannelBannedUsersModule.Provider>\n    );\n  };\n};\n\nexport default createGroupChannelBannedUsersFragment;\n"],"mappings":"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"}