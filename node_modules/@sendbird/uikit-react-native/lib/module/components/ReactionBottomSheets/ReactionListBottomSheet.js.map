{"version":3,"names":["React","FlatList","Pressable","View","useWindowDimensions","useSafeAreaInsets","Image","Modal","createStyleSheet","useUIKitTheme","UNKNOWN_USER_ID","NUM_COLUMN","ReactionListBottomSheet","visible","onClose","onDismiss","reactionCtx","chatCtx","width","bottom","left","right","colors","currentUser","emojiManager","channel","message","color","ui","reaction","default","Boolean","styles","modal","container","paddingBottom","backgroundColor","dialog","none","background","paddingLeft","paddingHorizontal","paddingRight","allEmoji","item","key","flatlist","height","url","reactedUserIds","reactions","find","it","userIds","idx","indexOf","userId","reacted","emojiItem","deleteReaction","addReaction","pressed","button","selected","enabled","uri","emoji","overflow","borderTopLeftRadius","borderTopRightRadius","paddingTop","flexDirection","alignItems","justifyContent","padding","borderRadius"],"sources":["ReactionListBottomSheet.tsx"],"sourcesContent":["import React from 'react';\nimport { FlatList, Pressable, View, useWindowDimensions } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { Image, Modal, createStyleSheet, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\n\nimport { UNKNOWN_USER_ID } from '../../constants';\nimport type { ReactionBottomSheetProps } from './index';\n\nconst NUM_COLUMN = 6;\nconst ReactionListBottomSheet = ({ visible, onClose, onDismiss, reactionCtx, chatCtx }: ReactionBottomSheetProps) => {\n  const { width } = useWindowDimensions();\n  const { bottom, left, right } = useSafeAreaInsets();\n  const { colors } = useUIKitTheme();\n\n  const { currentUser, emojiManager } = chatCtx;\n  const { channel, message } = reactionCtx;\n  const color = colors.ui.reaction.default;\n\n  return (\n    <Modal\n      type={'slide'}\n      visible={Boolean(visible && channel && message)}\n      onClose={onClose}\n      onDismiss={onDismiss}\n      backgroundStyle={styles.modal}\n    >\n      <View\n        style={[\n          styles.container,\n          {\n            width,\n            paddingBottom: bottom,\n            backgroundColor: colors.ui.dialog.default.none.background,\n            paddingLeft: left + styles.container.paddingHorizontal,\n            paddingRight: right + styles.container.paddingHorizontal,\n          },\n        ]}\n      >\n        <FlatList\n          data={emojiManager.allEmoji}\n          numColumns={NUM_COLUMN}\n          keyExtractor={(item) => item.key}\n          contentContainerStyle={styles.flatlist}\n          ItemSeparatorComponent={() => <View style={{ height: 16 }} />}\n          renderItem={({ item: { key, url } }) => {\n            const reactedUserIds = message?.reactions?.find((it) => it.key === key)?.userIds ?? [];\n\n            const idx = reactedUserIds.indexOf(currentUser?.userId ?? UNKNOWN_USER_ID);\n            const reacted = idx > -1;\n\n            return (\n              <View style={styles.emojiItem}>\n                <Pressable\n                  key={key}\n                  onPress={() => {\n                    if (message && channel) {\n                      if (reacted) channel.deleteReaction(message, key);\n                      else channel.addReaction(message, key);\n                    }\n                    onClose();\n                  }}\n                  style={({ pressed }) => [\n                    styles.button,\n                    { backgroundColor: reacted || pressed ? color.selected.background : color.enabled.background },\n                  ]}\n                >\n                  <Image source={{ uri: url }} style={styles.emoji} />\n                </Pressable>\n              </View>\n            );\n          }}\n        />\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = createStyleSheet({\n  container: {\n    overflow: 'hidden',\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    paddingTop: 16,\n    paddingHorizontal: 18,\n    flexDirection: 'row',\n  },\n  modal: {\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n  },\n  flatlist: {\n    width: '100%',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n  },\n  emojiItem: {\n    width: `${100 / NUM_COLUMN}%`,\n    alignItems: 'center',\n  },\n  button: {\n    width: 44,\n    height: 44,\n    padding: 4,\n    borderRadius: 8,\n  },\n  emoji: {\n    width: '100%',\n    height: '100%',\n  },\n});\n\nexport default ReactionListBottomSheet;\n"],"mappings":"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"}