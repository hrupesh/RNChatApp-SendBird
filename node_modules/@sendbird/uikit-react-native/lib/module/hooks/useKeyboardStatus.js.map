{"version":3,"names":["useEffect","useState","Keyboard","LayoutAnimation","Platform","useSafeAreaInsets","NOOP","isLayoutAnimationConfigured","configureNextLayoutAnimation","event","config","create","duration","easing","Properties","scaleY","onEnd","configureNext","showEvent","hideEvent","select","android","default","useKeyboardStatus","keyboardStatus","setKeyboardStatus","visible","height","bottomSpace","bottom","bottomInset","subscriptions","addListener","endCoordinates","ios","nextLayoutAnimation","forEach","it","remove"],"sources":["useKeyboardStatus.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Keyboard, KeyboardEvent, KeyboardEventName, LayoutAnimation, Platform } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { NOOP } from '@sendbird/uikit-utils';\n\ntype KeyboardEvents = {\n  showEvent: KeyboardEventName;\n  hideEvent: KeyboardEventName;\n};\n\nlet isLayoutAnimationConfigured = false;\n\nconst configureNextLayoutAnimation = (event: KeyboardEvent) => {\n  if (isLayoutAnimationConfigured) return;\n  const config = LayoutAnimation.create(event.duration, event.easing, LayoutAnimation.Properties.scaleY);\n  isLayoutAnimationConfigured = true;\n  const onEnd = () => (isLayoutAnimationConfigured = false);\n  LayoutAnimation.configureNext(config, onEnd, onEnd);\n};\n\nconst { showEvent, hideEvent } = Platform.select<KeyboardEvents>({\n  android: { showEvent: 'keyboardDidShow', hideEvent: 'keyboardDidHide' },\n  default: { showEvent: 'keyboardWillShow', hideEvent: 'keyboardWillHide' },\n});\n\nconst useKeyboardStatus = () => {\n  const [keyboardStatus, setKeyboardStatus] = useState({ visible: false, height: 0, bottomSpace: 0 });\n  const { bottom: bottomInset } = useSafeAreaInsets();\n\n  useEffect(() => {\n    const subscriptions = [\n      Keyboard.addListener(showEvent, (event) => {\n        const height = event.endCoordinates.height;\n        const bottomSpace = Platform.select({ ios: height - bottomInset, default: 0 });\n        const nextLayoutAnimation = Platform.select({ ios: configureNextLayoutAnimation, default: NOOP });\n\n        nextLayoutAnimation(event);\n        setKeyboardStatus({ visible: true, height, bottomSpace });\n      }),\n\n      Keyboard.addListener(hideEvent, () => {\n        const height = 0;\n        const bottomSpace = Platform.select({ default: height });\n        // const nextLayoutAnimation = Platform.select({ ios: configureNextLayoutAnimation, default: NOOP });\n\n        // nextLayoutAnimation(event);\n        setKeyboardStatus({ visible: false, height, bottomSpace });\n      }),\n    ];\n    return () => {\n      subscriptions.forEach((it) => it.remove());\n    };\n  }, []);\n\n  return keyboardStatus;\n};\n\nexport default useKeyboardStatus;\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,QAAT,EAAqDC,eAArD,EAAsEC,QAAtE,QAAsF,cAAtF;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AAEA,SAASC,IAAT,QAAqB,uBAArB;AAOA,IAAIC,2BAA2B,GAAG,KAAlC;;AAEA,MAAMC,4BAA4B,GAAIC,KAAD,IAA0B;EAC7D,IAAIF,2BAAJ,EAAiC;EACjC,MAAMG,MAAM,GAAGP,eAAe,CAACQ,MAAhB,CAAuBF,KAAK,CAACG,QAA7B,EAAuCH,KAAK,CAACI,MAA7C,EAAqDV,eAAe,CAACW,UAAhB,CAA2BC,MAAhF,CAAf;EACAR,2BAA2B,GAAG,IAA9B;;EACA,MAAMS,KAAK,GAAG,MAAOT,2BAA2B,GAAG,KAAnD;;EACAJ,eAAe,CAACc,aAAhB,CAA8BP,MAA9B,EAAsCM,KAAtC,EAA6CA,KAA7C;AACD,CAND;;AAQA,MAAM;EAAEE,SAAF;EAAaC;AAAb,IAA2Bf,QAAQ,CAACgB,MAAT,CAAgC;EAC/DC,OAAO,EAAE;IAAEH,SAAS,EAAE,iBAAb;IAAgCC,SAAS,EAAE;EAA3C,CADsD;EAE/DG,OAAO,EAAE;IAAEJ,SAAS,EAAE,kBAAb;IAAiCC,SAAS,EAAE;EAA5C;AAFsD,CAAhC,CAAjC;;AAKA,MAAMI,iBAAiB,GAAG,MAAM;EAC9B,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCxB,QAAQ,CAAC;IAAEyB,OAAO,EAAE,KAAX;IAAkBC,MAAM,EAAE,CAA1B;IAA6BC,WAAW,EAAE;EAA1C,CAAD,CAApD;EACA,MAAM;IAAEC,MAAM,EAAEC;EAAV,IAA0BzB,iBAAiB,EAAjD;EAEAL,SAAS,CAAC,MAAM;IACd,MAAM+B,aAAa,GAAG,CACpB7B,QAAQ,CAAC8B,WAAT,CAAqBd,SAArB,EAAiCT,KAAD,IAAW;MACzC,MAAMkB,MAAM,GAAGlB,KAAK,CAACwB,cAAN,CAAqBN,MAApC;MACA,MAAMC,WAAW,GAAGxB,QAAQ,CAACgB,MAAT,CAAgB;QAAEc,GAAG,EAAEP,MAAM,GAAGG,WAAhB;QAA6BR,OAAO,EAAE;MAAtC,CAAhB,CAApB;MACA,MAAMa,mBAAmB,GAAG/B,QAAQ,CAACgB,MAAT,CAAgB;QAAEc,GAAG,EAAE1B,4BAAP;QAAqCc,OAAO,EAAEhB;MAA9C,CAAhB,CAA5B;MAEA6B,mBAAmB,CAAC1B,KAAD,CAAnB;MACAgB,iBAAiB,CAAC;QAAEC,OAAO,EAAE,IAAX;QAAiBC,MAAjB;QAAyBC;MAAzB,CAAD,CAAjB;IACD,CAPD,CADoB,EAUpB1B,QAAQ,CAAC8B,WAAT,CAAqBb,SAArB,EAAgC,MAAM;MACpC,MAAMQ,MAAM,GAAG,CAAf;MACA,MAAMC,WAAW,GAAGxB,QAAQ,CAACgB,MAAT,CAAgB;QAAEE,OAAO,EAAEK;MAAX,CAAhB,CAApB,CAFoC,CAGpC;MAEA;;MACAF,iBAAiB,CAAC;QAAEC,OAAO,EAAE,KAAX;QAAkBC,MAAlB;QAA0BC;MAA1B,CAAD,CAAjB;IACD,CAPD,CAVoB,CAAtB;IAmBA,OAAO,MAAM;MACXG,aAAa,CAACK,OAAd,CAAuBC,EAAD,IAAQA,EAAE,CAACC,MAAH,EAA9B;IACD,CAFD;EAGD,CAvBQ,EAuBN,EAvBM,CAAT;EAyBA,OAAOd,cAAP;AACD,CA9BD;;AAgCA,eAAeD,iBAAf"}