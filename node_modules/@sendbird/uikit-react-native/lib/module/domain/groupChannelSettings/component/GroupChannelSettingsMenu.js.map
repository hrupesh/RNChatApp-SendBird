{"version":3,"names":["React","useContext","View","PushTriggerOption","Icon","MenuBar","Switch","useUIKitTheme","Logger","conditionChaining","useIIFE","useLocalization","useSendbirdChat","GroupChannelSettingsContexts","WARN_onPressMenuNotification","GroupChannelSettingsMenu","onPressMenuModeration","onPressMenuMembers","onPressMenuLeaveChannel","onPressMenuNotification","menuItemsCreator","menu","sdk","features","channel","Fragment","STRINGS","colors","__DEV__","warn","toggleNotification","myPushTriggerOption","setMyPushTriggerOption","DEFAULT","OFF","onPressNotificationMenu","actionLabelNotificationMenu","actionItemNotificationMenu","getNotificationsLabel","ALL","GROUP_CHANNEL_SETTINGS","MENU_NOTIFICATION_LABEL_ON","MENU_NOTIFICATION_LABEL_OFF","MENTION_ONLY","MENU_NOTIFICATION_LABEL_MENTION_ONLY","userMentionEnabled","onBackground01","menuItems","icon","visible","myRole","name","MENU_MODERATION","onPress","actionItem","MENU_NOTIFICATION","actionLabel","MENU_MEMBERS","String","memberCount","iconColor","error","MENU_LEAVE_CHANNEL","leave","then","clearCachedMessages","url","catch","map","disabled","iconBackgroundColor"],"sources":["GroupChannelSettingsMenu.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { View } from 'react-native';\n\nimport { PushTriggerOption } from '@sendbird/chat';\nimport type { MenuBarProps } from '@sendbird/uikit-react-native-foundation';\nimport { Icon, MenuBar, Switch, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { Logger, conditionChaining, useIIFE } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport { GroupChannelSettingsContexts } from '../module/moduleContext';\nimport type { GroupChannelSettingsProps } from '../types';\n\nlet WARN_onPressMenuNotification = false;\n\nconst GroupChannelSettingsMenu = ({\n  onPressMenuModeration,\n  onPressMenuMembers,\n  onPressMenuLeaveChannel,\n  onPressMenuNotification,\n  menuItemsCreator = (menu) => menu,\n}: GroupChannelSettingsProps['Menu']) => {\n  const { sdk, features } = useSendbirdChat();\n  const { channel } = useContext(GroupChannelSettingsContexts.Fragment);\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n\n  if (__DEV__ && !WARN_onPressMenuNotification && !onPressMenuNotification) {\n    Logger.warn('You should pass `onPressMenuNotification` prop if using mention');\n    WARN_onPressMenuNotification = true;\n  }\n\n  const toggleNotification = async () => {\n    if (channel.myPushTriggerOption === 'off') {\n      await channel.setMyPushTriggerOption(PushTriggerOption.DEFAULT);\n    } else {\n      await channel.setMyPushTriggerOption(PushTriggerOption.OFF);\n    }\n  };\n\n  const { onPressNotificationMenu, actionLabelNotificationMenu, actionItemNotificationMenu } = useIIFE(() => {\n    const getNotificationsLabel = () => {\n      switch (channel.myPushTriggerOption) {\n        case PushTriggerOption.ALL:\n        case PushTriggerOption.DEFAULT:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_ON;\n        case PushTriggerOption.OFF:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_OFF;\n        case PushTriggerOption.MENTION_ONLY:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_MENTION_ONLY;\n      }\n    };\n\n    return {\n      actionLabelNotificationMenu: getNotificationsLabel(),\n      actionItemNotificationMenu: conditionChaining(\n        [features.userMentionEnabled],\n        [\n          <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n          <Switch value={channel.myPushTriggerOption !== 'off'} onChangeValue={toggleNotification} />,\n        ],\n      ),\n      onPressNotificationMenu: () => {\n        if (features.userMentionEnabled) onPressMenuNotification?.();\n        else toggleNotification();\n      },\n    };\n  });\n\n  const menuItems: MenuBarProps[] = menuItemsCreator([\n    {\n      icon: 'moderation',\n      visible: channel.myRole === 'operator',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_MODERATION,\n      onPress: () => onPressMenuModeration(),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'notifications',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION,\n      onPress: onPressNotificationMenu,\n      actionLabel: actionLabelNotificationMenu,\n      actionItem: actionItemNotificationMenu,\n    },\n    {\n      icon: 'members',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_MEMBERS,\n      onPress: () => onPressMenuMembers(),\n      actionLabel: String(channel.memberCount),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'leave',\n      iconColor: colors.error,\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_LEAVE_CHANNEL,\n      onPress: () => {\n        channel.leave().then(() => {\n          onPressMenuLeaveChannel();\n          sdk.clearCachedMessages([channel.url]).catch();\n        });\n      },\n    },\n  ]);\n\n  return (\n    <View>\n      {menuItems.map((menu) => {\n        return (\n          <MenuBar\n            key={menu.name}\n            onPress={menu.onPress}\n            name={menu.name}\n            disabled={menu.disabled}\n            visible={menu.visible}\n            icon={menu.icon}\n            iconColor={menu.iconColor}\n            iconBackgroundColor={menu.iconBackgroundColor}\n            actionLabel={menu.actionLabel}\n            actionItem={menu.actionItem}\n          />\n        );\n      })}\n    </View>\n  );\n};\n\nexport default GroupChannelSettingsMenu;\n"],"mappings":"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"}