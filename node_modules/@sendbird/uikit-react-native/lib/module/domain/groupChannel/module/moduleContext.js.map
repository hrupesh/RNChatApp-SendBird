{"version":3,"names":["React","createContext","useState","useChannelHandler","NOOP","isDifferentChannel","useUniqId","ProviderLayout","useLocalization","useSendbirdChat","GroupChannelContexts","Fragment","headerTitle","channel","setMessageToEdit","TypingIndicator","typingUsers","GroupChannelContextsProvider","children","enableTypingIndicator","keyboardAvoidOffset","Error","id","STRINGS","currentUser","sdk","setTypingUsers","messageToEdit","onTypingStatusUpdated","eventChannel","getTypingUsers","GROUP_CHANNEL","HEADER_TITLE","userId"],"sources":["moduleContext.tsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport {\n  NOOP,\n  SendbirdFileMessage,\n  SendbirdGroupChannel,\n  SendbirdUser,\n  SendbirdUserMessage,\n  isDifferentChannel,\n  useUniqId,\n} from '@sendbird/uikit-utils';\n\nimport ProviderLayout from '../../../components/ProviderLayout';\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport type { GroupChannelContextsType, GroupChannelModule } from '../types';\n\nexport const GroupChannelContexts: GroupChannelContextsType = {\n  Fragment: createContext({\n    headerTitle: '',\n    channel: {} as SendbirdGroupChannel,\n    setMessageToEdit: NOOP,\n  }),\n  TypingIndicator: createContext({\n    typingUsers: [] as SendbirdUser[],\n  }),\n};\n\nexport const GroupChannelContextsProvider: GroupChannelModule['Provider'] = ({\n  children,\n  channel,\n  enableTypingIndicator,\n  keyboardAvoidOffset = 0,\n}) => {\n  if (!channel) throw new Error('GroupChannel is not provided to GroupChannelModule');\n\n  const id = useUniqId('GroupChannelContextsProvider');\n  const { STRINGS } = useLocalization();\n  const { currentUser, sdk } = useSendbirdChat();\n\n  const [typingUsers, setTypingUsers] = useState<SendbirdUser[]>([]);\n  const [messageToEdit, setMessageToEdit] = useState<SendbirdUserMessage | SendbirdFileMessage>();\n\n  useChannelHandler(sdk, `GroupChannelContextsProvider_${id}`, {\n    onTypingStatusUpdated(eventChannel) {\n      if (isDifferentChannel(channel, eventChannel)) return;\n      if (!enableTypingIndicator) return;\n      setTypingUsers(eventChannel.getTypingUsers());\n    },\n  });\n\n  return (\n    <ProviderLayout>\n      <GroupChannelContexts.Fragment.Provider\n        value={{\n          headerTitle: STRINGS.GROUP_CHANNEL.HEADER_TITLE(currentUser?.userId ?? '', channel),\n          channel,\n          messageToEdit,\n          setMessageToEdit,\n          keyboardAvoidOffset,\n        }}\n      >\n        <GroupChannelContexts.TypingIndicator.Provider value={{ typingUsers }}>\n          {children}\n        </GroupChannelContexts.TypingIndicator.Provider>\n      </GroupChannelContexts.Fragment.Provider>\n    </ProviderLayout>\n  );\n};\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,QAA+C,OAA/C;AAEA,SAASC,iBAAT,QAAkC,4BAAlC;AACA,SACEC,IADF,EAMEC,kBANF,EAOEC,SAPF,QAQO,uBARP;AAUA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,SAASC,eAAT,EAA0BC,eAA1B,QAAiD,2BAAjD;AAGA,OAAO,MAAMC,oBAA8C,GAAG;EAC5DC,QAAQ,eAAEV,aAAa,CAAC;IACtBW,WAAW,EAAE,EADS;IAEtBC,OAAO,EAAE,EAFa;IAGtBC,gBAAgB,EAAEV;EAHI,CAAD,CADqC;EAM5DW,eAAe,eAAEd,aAAa,CAAC;IAC7Be,WAAW,EAAE;EADgB,CAAD;AAN8B,CAAvD;AAWP,OAAO,MAAMC,4BAA4D,GAAG,QAKtE;EAAA,IALuE;IAC3EC,QAD2E;IAE3EL,OAF2E;IAG3EM,qBAH2E;IAI3EC,mBAAmB,GAAG;EAJqD,CAKvE;EACJ,IAAI,CAACP,OAAL,EAAc,MAAM,IAAIQ,KAAJ,CAAU,oDAAV,CAAN;EAEd,MAAMC,EAAE,GAAGhB,SAAS,CAAC,8BAAD,CAApB;EACA,MAAM;IAAEiB;EAAF,IAAcf,eAAe,EAAnC;EACA,MAAM;IAAEgB,WAAF;IAAeC;EAAf,IAAuBhB,eAAe,EAA5C;EAEA,MAAM,CAACO,WAAD,EAAcU,cAAd,IAAgCxB,QAAQ,CAAiB,EAAjB,CAA9C;EACA,MAAM,CAACyB,aAAD,EAAgBb,gBAAhB,IAAoCZ,QAAQ,EAAlD;EAEAC,iBAAiB,CAACsB,GAAD,EAAO,gCAA+BH,EAAG,EAAzC,EAA4C;IAC3DM,qBAAqB,CAACC,YAAD,EAAe;MAClC,IAAIxB,kBAAkB,CAACQ,OAAD,EAAUgB,YAAV,CAAtB,EAA+C;MAC/C,IAAI,CAACV,qBAAL,EAA4B;MAC5BO,cAAc,CAACG,YAAY,CAACC,cAAb,EAAD,CAAd;IACD;;EAL0D,CAA5C,CAAjB;EAQA,oBACE,oBAAC,cAAD,qBACE,oBAAC,oBAAD,CAAsB,QAAtB,CAA+B,QAA/B;IACE,KAAK,EAAE;MACLlB,WAAW,EAAEW,OAAO,CAACQ,aAAR,CAAsBC,YAAtB,CAAmC,CAAAR,WAAW,SAAX,IAAAA,WAAW,WAAX,YAAAA,WAAW,CAAES,MAAb,KAAuB,EAA1D,EAA8DpB,OAA9D,CADR;MAELA,OAFK;MAGLc,aAHK;MAILb,gBAJK;MAKLM;IALK;EADT,gBASE,oBAAC,oBAAD,CAAsB,eAAtB,CAAsC,QAAtC;IAA+C,KAAK,EAAE;MAAEJ;IAAF;EAAtD,GACGE,QADH,CATF,CADF,CADF;AAiBD,CAxCM"}