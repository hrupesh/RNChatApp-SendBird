{"version":3,"names":["React","useContext","Pressable","ScrollView","View","useWindowDimensions","useSafeAreaInsets","Avatar","Divider","Icon","Text","createStyleSheet","useHeaderStyle","useUIKitTheme","conditionChaining","useLocalization","useSendbirdChat","useKeyboardStatus","useMentionSuggestion","GroupChannelContexts","GroupChannelSuggestedMentionList","text","selection","inputHeight","bottomInset","onPressToMention","mentionedUsers","width","screenWidth","height","screenHeight","channel","Fragment","mentionManager","STRINGS","colors","topInset","left","right","keyboard","members","reset","searchStringRange","searchLimited","isLandscape","isShortened","visible","canRenderMembers","length","maxHeight","styles","suggestion","renderLimitGuide","borderTopColor","onBackground04","marginRight","onBackground02","GROUP_CHANNEL","MENTION_LIMITED","config","mentionLimit","renderMembers","map","member","userId","userContainer","profileUrl","userAvatar","userInfo","onBackground01","userNickname","nickname","LABELS","USER_NO_NAME","onBackground03","position","bottom","container","scrollView","backgroundColor","background","bottomSpace","borderTopWidth","paddingLeft","paddingRight","top","flexDirection","alignItems","justifyContent","flex","flexShrink","lineHeight","textAlignVertical","minWidth","paddingHorizontal"],"sources":["GroupChannelSuggestedMentionList.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { Pressable, ScrollView, View, useWindowDimensions } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport {\n  Avatar,\n  Divider,\n  Icon,\n  Text,\n  createStyleSheet,\n  useHeaderStyle,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport { conditionChaining } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport useKeyboardStatus from '../../../hooks/useKeyboardStatus';\nimport useMentionSuggestion from '../../../hooks/useMentionSuggestion';\nimport { GroupChannelContexts } from '../module/moduleContext';\nimport type { GroupChannelProps } from '../types';\n\nconst GroupChannelSuggestedMentionList = ({\n  text,\n  selection,\n  inputHeight,\n  bottomInset,\n  onPressToMention,\n  mentionedUsers,\n}: GroupChannelProps['SuggestedMentionList']) => {\n  const { width: screenWidth, height: screenHeight } = useWindowDimensions();\n  const { channel } = useContext(GroupChannelContexts.Fragment);\n  const { mentionManager } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n  const { topInset } = useHeaderStyle();\n  const { left, right } = useSafeAreaInsets();\n\n  const keyboard = useKeyboardStatus();\n\n  const { members, reset, searchStringRange, searchLimited } = useMentionSuggestion({\n    text,\n    selection,\n    channel,\n    mentionedUsers,\n  });\n\n  const isLandscape = screenWidth > screenHeight;\n  const isShortened = isLandscape && keyboard.visible;\n  const canRenderMembers = members.length > 0;\n  const maxHeight = isShortened ? screenHeight - (topInset + inputHeight + keyboard.height) : styles.suggestion.height;\n\n  const renderLimitGuide = () => {\n    return (\n      <View style={[styles.searchLimited, { borderTopColor: colors.onBackground04 }]}>\n        <Icon icon={'info'} size={20} containerStyle={{ marginRight: 4 }} color={colors.onBackground02} />\n        <Text body3 color={colors.onBackground02}>\n          {STRINGS.GROUP_CHANNEL.MENTION_LIMITED(mentionManager.config.mentionLimit)}\n        </Text>\n      </View>\n    );\n  };\n\n  const renderMembers = () => {\n    return (\n      <View>\n        {members.map((member) => {\n          return (\n            <Pressable\n              onPress={() => {\n                onPressToMention(member, searchStringRange);\n                reset();\n              }}\n              key={member.userId}\n              style={styles.userContainer}\n            >\n              <Avatar size={28} uri={member.profileUrl} containerStyle={styles.userAvatar} />\n              <View style={styles.userInfo}>\n                <Text body2 color={colors.onBackground01} numberOfLines={1} style={styles.userNickname}>\n                  {member.nickname || STRINGS.LABELS.USER_NO_NAME}\n                </Text>\n                <Text body3 color={colors.onBackground03} numberOfLines={1} style={styles.userId}>\n                  {member.userId}\n                </Text>\n                <Divider style={{ position: 'absolute', bottom: 0 }} />\n              </View>\n            </Pressable>\n          );\n        })}\n      </View>\n    );\n  };\n\n  return (\n    <Pressable\n      onPress={reset}\n      pointerEvents={canRenderMembers ? 'auto' : 'none'}\n      style={[styles.container, { bottom: inputHeight + bottomInset }]}\n    >\n      <ScrollView\n        bounces={false}\n        keyboardDismissMode={'none'}\n        keyboardShouldPersistTaps={'always'}\n        style={[\n          styles.scrollView,\n          {\n            maxHeight,\n            backgroundColor: colors.background,\n            bottom: keyboard.bottomSpace,\n          },\n          canRenderMembers && {\n            borderTopWidth: 1,\n            borderTopColor: colors.onBackground04,\n          },\n        ]}\n        contentContainerStyle={{ paddingLeft: left, paddingRight: right }}\n      >\n        {conditionChaining([searchLimited, canRenderMembers], [renderLimitGuide(), renderMembers(), null])}\n      </ScrollView>\n    </Pressable>\n  );\n};\n\nconst styles = createStyleSheet({\n  suggestion: {\n    height: 196,\n  },\n  container: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    left: 0,\n  },\n  scrollView: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n  },\n  userContainer: {\n    paddingLeft: 16,\n    flexDirection: 'row',\n    height: 44,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  userAvatar: {\n    marginRight: 16,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    flex: 1,\n  },\n  userNickname: {\n    flexShrink: 1,\n    lineHeight: 44,\n    textAlignVertical: 'center',\n    marginRight: 6,\n  },\n  userId: {\n    lineHeight: 44,\n    textAlignVertical: 'center',\n    minWidth: 32,\n    flexShrink: 1,\n    marginRight: 16,\n  },\n  searchLimited: {\n    borderTopWidth: 1,\n    paddingHorizontal: 16,\n    height: 44,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n});\nexport default GroupChannelSuggestedMentionList;\n"],"mappings":"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"}