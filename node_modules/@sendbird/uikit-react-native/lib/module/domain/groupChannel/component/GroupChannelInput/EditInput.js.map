{"version":3,"names":["React","forwardRef","Platform","View","MentionType","Button","TextInput","createStyleSheet","useToast","useLocalization","useSendbirdChat","EditInput","ref","text","onChangeText","messageToEdit","setMessageToEdit","onUpdateUserMessage","onSelectionChange","disabled","autoFocus","mentionedUsers","mentionManager","STRINGS","toast","onPressCancel","onPressSave","isUserMessage","mention","userIds","map","it","user","userId","messageTemplate","textToMentionedMessageTemplate","type","USERS","catch","show","TOAST","UPDATE_MSG_ERROR","styles","editInputContainer","inputWrapper","input","GROUP_CHANNEL","INPUT_PLACEHOLDER_ACTIVE","textToMentionedComponents","marginTop","flexDirection","INPUT_EDIT_CANCEL","space","INPUT_EDIT_OK","paddingVertical","paddingHorizontal","alignItems","flex","marginRight","minHeight","maxHeight","select","ios","default","borderRadius"],"sources":["EditInput.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport {\n  NativeSyntheticEvent,\n  Platform,\n  TextInput as RNTextInput,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native';\n\nimport { MentionType } from '@sendbird/chat/message';\nimport { Button, TextInput, createStyleSheet, useToast } from '@sendbird/uikit-react-native-foundation';\nimport type { SendbirdFileMessage, SendbirdUserMessage } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../../hooks/useContext';\nimport type { MentionedUser } from '../../../../types';\nimport type { GroupChannelProps } from '../../types';\n\ntype EditInputProps = GroupChannelProps['Input'] & {\n  text: string;\n  onChangeText: (val: string) => void;\n  messageToEdit: SendbirdUserMessage | SendbirdFileMessage;\n  setMessageToEdit: (msg?: SendbirdUserMessage | SendbirdFileMessage) => void;\n  onSelectionChange: (e: NativeSyntheticEvent<TextInputSelectionChangeEventData>) => void;\n  disabled: boolean;\n  autoFocus: boolean;\n  mentionedUsers: MentionedUser[];\n};\n\nconst EditInput = forwardRef<RNTextInput, EditInputProps>(function EditInput(\n  {\n    text,\n    onChangeText,\n    messageToEdit,\n    setMessageToEdit,\n    onUpdateUserMessage,\n    onSelectionChange,\n    disabled,\n    autoFocus,\n    mentionedUsers,\n  },\n  ref,\n) {\n  const { mentionManager } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const toast = useToast();\n\n  const onPressCancel = () => {\n    setMessageToEdit();\n    onChangeText('');\n  };\n\n  const onPressSave = () => {\n    if (messageToEdit.isUserMessage()) {\n      const mention = {\n        userIds: mentionedUsers.map((it) => it.user.userId),\n        messageTemplate: mentionManager.textToMentionedMessageTemplate(text, mentionedUsers),\n        type: MentionType.USERS,\n      };\n\n      onUpdateUserMessage(text, messageToEdit, mention).catch(() =>\n        toast.show(STRINGS.TOAST.UPDATE_MSG_ERROR, 'error'),\n      );\n    }\n    setMessageToEdit();\n    onChangeText('');\n  };\n\n  return (\n    <View style={styles.editInputContainer}>\n      <View style={styles.inputWrapper}>\n        <TextInput\n          ref={ref}\n          multiline\n          disableFullscreenUI\n          editable={!disabled}\n          autoFocus={autoFocus}\n          onChangeText={onChangeText}\n          style={styles.input}\n          placeholder={STRINGS.GROUP_CHANNEL.INPUT_PLACEHOLDER_ACTIVE}\n          onSelectionChange={onSelectionChange}\n        >\n          {mentionManager.textToMentionedComponents(text, mentionedUsers)}\n        </TextInput>\n      </View>\n      <View style={{ marginTop: 8, flexDirection: 'row' }}>\n        <Button variant={'text'} onPress={onPressCancel}>\n          {STRINGS.GROUP_CHANNEL.INPUT_EDIT_CANCEL}\n        </Button>\n        <View style={styles.space} />\n        <Button variant={'contained'} onPress={onPressSave}>\n          {STRINGS.GROUP_CHANNEL.INPUT_EDIT_OK}\n        </Button>\n      </View>\n    </View>\n  );\n});\n\nconst styles = createStyleSheet({\n  editInputContainer: {\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  input: {\n    flex: 1,\n    marginRight: 4,\n    minHeight: 36,\n    maxHeight: 36 * Platform.select({ ios: 2.5, default: 2 }),\n    borderRadius: 20,\n  },\n  inputWrapper: {\n    flexDirection: 'row',\n  },\n  space: {\n    flex: 1,\n  },\n});\n\nexport default EditInput;\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAEEC,QAFF,EAKEC,IALF,QAMO,cANP;AAQA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,MAAT,EAAiBC,SAAjB,EAA4BC,gBAA5B,EAA8CC,QAA9C,QAA8D,yCAA9D;AAGA,SAASC,eAAT,EAA0BC,eAA1B,QAAiD,8BAAjD;AAeA,MAAMC,SAAS,gBAAGV,UAAU,CAA8B,SAASU,SAAT,OAYxDC,GAZwD,EAaxD;EAAA,IAZA;IACEC,IADF;IAEEC,YAFF;IAGEC,aAHF;IAIEC,gBAJF;IAKEC,mBALF;IAMEC,iBANF;IAOEC,QAPF;IAQEC,SARF;IASEC;EATF,CAYA;EACA,MAAM;IAAEC;EAAF,IAAqBZ,eAAe,EAA1C;EACA,MAAM;IAAEa;EAAF,IAAcd,eAAe,EAAnC;EACA,MAAMe,KAAK,GAAGhB,QAAQ,EAAtB;;EAEA,MAAMiB,aAAa,GAAG,MAAM;IAC1BT,gBAAgB;IAChBF,YAAY,CAAC,EAAD,CAAZ;EACD,CAHD;;EAKA,MAAMY,WAAW,GAAG,MAAM;IACxB,IAAIX,aAAa,CAACY,aAAd,EAAJ,EAAmC;MACjC,MAAMC,OAAO,GAAG;QACdC,OAAO,EAAER,cAAc,CAACS,GAAf,CAAoBC,EAAD,IAAQA,EAAE,CAACC,IAAH,CAAQC,MAAnC,CADK;QAEdC,eAAe,EAAEZ,cAAc,CAACa,8BAAf,CAA8CtB,IAA9C,EAAoDQ,cAApD,CAFH;QAGde,IAAI,EAAEhC,WAAW,CAACiC;MAHJ,CAAhB;MAMApB,mBAAmB,CAACJ,IAAD,EAAOE,aAAP,EAAsBa,OAAtB,CAAnB,CAAkDU,KAAlD,CAAwD,MACtDd,KAAK,CAACe,IAAN,CAAWhB,OAAO,CAACiB,KAAR,CAAcC,gBAAzB,EAA2C,OAA3C,CADF;IAGD;;IACDzB,gBAAgB;IAChBF,YAAY,CAAC,EAAD,CAAZ;EACD,CAdD;;EAgBA,oBACE,oBAAC,IAAD;IAAM,KAAK,EAAE4B,MAAM,CAACC;EAApB,gBACE,oBAAC,IAAD;IAAM,KAAK,EAAED,MAAM,CAACE;EAApB,gBACE,oBAAC,SAAD;IACE,GAAG,EAAEhC,GADP;IAEE,SAAS,MAFX;IAGE,mBAAmB,MAHrB;IAIE,QAAQ,EAAE,CAACO,QAJb;IAKE,SAAS,EAAEC,SALb;IAME,YAAY,EAAEN,YANhB;IAOE,KAAK,EAAE4B,MAAM,CAACG,KAPhB;IAQE,WAAW,EAAEtB,OAAO,CAACuB,aAAR,CAAsBC,wBARrC;IASE,iBAAiB,EAAE7B;EATrB,GAWGI,cAAc,CAAC0B,yBAAf,CAAyCnC,IAAzC,EAA+CQ,cAA/C,CAXH,CADF,CADF,eAgBE,oBAAC,IAAD;IAAM,KAAK,EAAE;MAAE4B,SAAS,EAAE,CAAb;MAAgBC,aAAa,EAAE;IAA/B;EAAb,gBACE,oBAAC,MAAD;IAAQ,OAAO,EAAE,MAAjB;IAAyB,OAAO,EAAEzB;EAAlC,GACGF,OAAO,CAACuB,aAAR,CAAsBK,iBADzB,CADF,eAIE,oBAAC,IAAD;IAAM,KAAK,EAAET,MAAM,CAACU;EAApB,EAJF,eAKE,oBAAC,MAAD;IAAQ,OAAO,EAAE,WAAjB;IAA8B,OAAO,EAAE1B;EAAvC,GACGH,OAAO,CAACuB,aAAR,CAAsBO,aADzB,CALF,CAhBF,CADF;AA4BD,CAnE2B,CAA5B;AAqEA,MAAMX,MAAM,GAAGnC,gBAAgB,CAAC;EAC9BoC,kBAAkB,EAAE;IAClBW,eAAe,EAAE,EADC;IAElBC,iBAAiB,EAAE,EAFD;IAGlBL,aAAa,EAAE,QAHG;IAIlBM,UAAU,EAAE;EAJM,CADU;EAO9BX,KAAK,EAAE;IACLY,IAAI,EAAE,CADD;IAELC,WAAW,EAAE,CAFR;IAGLC,SAAS,EAAE,EAHN;IAILC,SAAS,EAAE,KAAK1D,QAAQ,CAAC2D,MAAT,CAAgB;MAAEC,GAAG,EAAE,GAAP;MAAYC,OAAO,EAAE;IAArB,CAAhB,CAJX;IAKLC,YAAY,EAAE;EALT,CAPuB;EAc9BpB,YAAY,EAAE;IACZM,aAAa,EAAE;EADH,CAdgB;EAiB9BE,KAAK,EAAE;IACLK,IAAI,EAAE;EADD;AAjBuB,CAAD,CAA/B;AAsBA,eAAe9C,SAAf"}